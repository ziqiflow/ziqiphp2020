webpackJsonp([15],{"+sI2":function(e,t){},"/YWQ":function(e,t){},"02s5":function(e,t){},"0CXz":function(e,t,n){"use strict";n.d(t,"t",function(){return i}),n.d(t,"l",function(){return a}),n.d(t,"m",function(){return o}),n.d(t,"e",function(){return r}),n.d(t,"f",function(){return l}),n.d(t,"g",function(){return c}),n.d(t,"i",function(){return u}),n.d(t,"v",function(){return d}),n.d(t,"B",function(){return h}),n.d(t,"n",function(){return p}),n.d(t,"p",function(){return f}),n.d(t,"q",function(){return v}),n.d(t,"d",function(){return m}),n.d(t,"h",function(){return _}),n.d(t,"o",function(){return y}),n.d(t,"A",function(){return g}),n.d(t,"r",function(){return b}),n.d(t,"s",function(){return w}),n.d(t,"j",function(){return D}),n.d(t,"k",function(){return T}),n.d(t,"w",function(){return L}),n.d(t,"z",function(){return k}),n.d(t,"b",function(){return S}),n.d(t,"c",function(){return C}),n.d(t,"u",function(){return E}),n.d(t,"a",function(){return O}),n.d(t,"x",function(){return x}),n.d(t,"y",function(){return R});var s=n("vLgD");window.oaname||(window.oaname="oa");var i=function(e){return Object(s.a)({url:"/api/"+window.oaname+"/flow/message/hasread",data:e,method:"post",canTest:!0})},a=function(e){return Object(s.a)({url:"/api/"+window.oaname+"/flow/deletefile",data:e,method:"post",canTest:!0})},o=function(e){return Object(s.a)({url:"/api/"+window.oaname+"/flow/uploadfile",data:e,timeout:18e5,method:"post",canTest:!0,headers:{"Content-Type":"multipart/form-data"}})},r=function(e){return Object(s.a)({url:"/api/"+window.oaname+"/flow/creat",data:e,method:"post",canTest:!0})},l=function(e){return Object(s.a)({url:"/api/"+window.oaname+"/flow/creatpreviewmode",data:e,method:"post",canTest:!0})},c=function(e){return Object(s.a)({url:"/api/"+window.oaname+"/flow/deal",data:e,method:"post",canTest:!0})},u=function(e){return Object(s.a)({url:"/api/"+window.oaname+"/flow/dealpreviewmode",data:e,method:"post",canTest:!0})},d=function(e){return Object(s.a)({url:"/api/"+window.oaname+"/flow/needcreat",data:e,method:"post",canTest:!0})},h=function(e){return Object(s.a)({url:"/api/"+window.oaname+"/flow/list/waiting",data:e,method:"post",canTest:!0})},p=function(e){return Object(s.a)({url:"/api/"+window.oaname+"/flow/list/finish",data:e,method:"post",canTest:!0})},f=function(e){return Object(s.a)({url:"/api/"+window.oaname+"/flow/list/icreat",data:e,method:"post",canTest:!0})},v=function(e){return Object(s.a)({url:"/api/"+window.oaname+"/flow/list/message",data:e,method:"post",canTest:!0})},m=function(e){return Object(s.a)({url:"/api/"+window.oaname+"/flow/list/cc",data:e,method:"post",canTest:!0})},_=function(e){return Object(s.a)({url:"/api/"+window.oaname+"/flow/deal/bymsgid",data:e,method:"post",canTest:!0})},y=function(e){return Object(s.a)({url:"/api/"+window.oaname+"/flow/getbycreat",data:e,method:"post"})},g=function(e){return Object(s.a)({url:"/api/"+window.oaname+"/flow/tempform/save",data:e,method:"post"})},b=function(e){return Object(s.a)({url:"/api/"+window.oaname+"/flow/checkmsgstatus",data:e,method:"post"})},w=function(e){return Object(s.a)({url:"/api/"+window.oaname+"/flow/checkmsgstatus/export",data:e,method:"post",responseType:"arraybuffer"})},D=function(e){return Object(s.a)({url:"/api/"+window.oaname+"/flow/detail",data:e,method:"post",canTest:!0})},T=function(e){return Object(s.a)({url:"/api/"+window.oaname+"/flow/detail_logs_msgs",data:e,method:"post",canTest:!0})},L=function(e){return console.log("window.oaname",window.oaname),Object(s.a)({url:"/api/"+window.oaname+"/flow/list/number",data:e,method:"post",canTest:!0})},k=function(e){return Object(s.a)({url:"/api/"+window.oaname+"/flow/setread",data:e,method:"post",canTest:!0})},S=function(e){return Object(s.a)({url:"/api/"+window.oaname+"/flow/alertdone",data:e,method:"post",canTest:!0})},C=function(e){return Object(s.a)({url:"/api/"+window.oaname+"/flow/list/cancancel",data:e,method:"post",canTest:!0})},E=function(e){return Object(s.a)({url:"/api/"+window.oaname+"/flow/cancel",data:e,method:"post",canTest:!0})},O=function(e){return Object(s.a)({url:"/api/"+window.oaname+"/flow/allcancel",data:e,method:"post",canTest:!0})},x=function(e){return Object(s.a)({url:"/api/"+window.oaname+"/flow/revokelist",data:e,method:"post",canTest:!0})},R=function(e){return Object(s.a)({url:"/api/"+window.oaname+"/flow/revoketo",data:e,method:"post",canTest:!0})}},"0uyp":function(e,t){},"2YZj":function(e,t){!function(e){var t,n='<svg><symbol id="v-icon-time" viewBox="0 0 1024 1024"><path d="M512 64C264.96 64 64 264.96 64 512s200.96 448 448 448 448-200.96 448-448S759.04 64 512 64zM512 895.712c-211.584 0-383.712-172.16-383.712-383.712C128.288 300.416 300.416 128.288 512 128.288c211.552 0 383.712 172.128 383.712 383.712C895.712 723.552 723.552 895.712 512 895.712z"  ></path><path d="M671.968 512 512 512 512 288.064c0-17.76-14.24-32.128-32-32.128s-32 14.4-32 32.128L448 544c0 17.76 14.272 32 32 32l191.968 0c17.76 0 32.128-14.24 32.128-32S689.728 512 671.968 512z"  ></path></symbol><symbol id="v-icon-dengluzhucechenggong" viewBox="0 0 1024 1024"><path d="M512.015052 32.633132c-264.662531 0-479.24645 214.629075-479.24645 479.366868s214.568867 479.38192 479.24645 479.38192c264.647479 0 479.231398-214.644128 479.231398-479.38192S776.662531 32.633132 512.015052 32.633132zM512.015052 931.474232c-231.231633 0-419.338762-188.197442-419.338762-419.45918 0-231.27679 188.107129-419.444128 419.338762-419.444128S931.338762 280.72321 931.338762 512.015052C931.338762 743.27679 743.14132 931.474232 512.015052 931.474232zM721.90269 321.334c-19.357107-12.68899-45.322123-7.255152-58.011113 12.177216L461.635396 642.607791l-96.695223-89.530384c-16.993914-15.669322-43.545965-14.660826-59.290548 2.333088-15.759635 17.054123-14.675878 43.561017 2.333088 59.275496l133.633279 123.668734 1.565427 0.978392 3.130854 3.221167 5.764986 2.227723 6.8939 2.799706 6.999265 1.068705 10.054858-0.120417 4.079142-0.948288 11.755755-4.891959 1.836366-1.369749 7.194943-5.193003 3.371689-5.509099 0.165574-0.255887L734.034749 379.46553C746.693635 360.033162 741.259797 334.02299 721.90269 321.334z"  ></path></symbol><symbol id="v-icon-message" viewBox="0 0 1024 1024"><path d="M510.82064 911.283846c-16.229636 0-31.275307-8.083096-40.285518-21.606087l-78.730109-118.430296L125.555066 771.247462c-33.540907 0-60.830437-27.367301-60.830437-61.010539L64.724629 222.174102c0-33.644261 27.28953-61.010539 60.830437-61.010539l770.521938 0c33.540907 0 60.829414 27.366278 60.829414 61.010539l0 488.060775c0 33.643238-27.288506 61.010539-60.829414 61.010539L629.826034 771.245416l-78.749552 118.430296c-8.989745 13.528108-24.040533 21.606087-40.260959 21.606087L510.82064 911.281799zM125.555066 201.838961c-11.190877 0-20.276812 9.124821-20.276812 20.335141l0 488.060775c0 11.229762 9.091052 20.335141 20.276812 20.335141l287.954271 0 90.7734 136.551002c2.039449 3.052522 4.973268 3.485381 6.538927 3.485381 1.561565 0 4.494361-0.432859 6.53381-3.485381L608.10329 730.571041l287.973714 0c11.18576 0 20.275789-9.105379 20.275789-20.335141L916.352793 222.174102c0-11.210319-9.091052-20.335141-20.275789-20.335141L125.555066 201.838961 125.555066 201.838961zM249.125429 393.186987c39.802518 0 72.049966 32.269961 72.049966 72.049966 0 39.773865-32.253588 72.048943-72.049966 72.048943-39.802518 0-72.048943-32.275077-72.048943-72.048943C177.075463 425.456948 209.322911 393.186987 249.125429 393.186987L249.125429 393.186987zM513.31546 393.186987c39.797401 0 72.042803 32.269961 72.042803 72.049966 0 39.773865-32.246425 72.048943-72.042803 72.048943-39.810704 0-72.058153-32.275077-72.058153-72.048943C441.257308 425.456948 473.504756 393.186987 513.31546 393.186987L513.31546 393.186987zM777.496282 393.186987c39.797401 0 72.049966 32.269961 72.049966 72.049966 0 39.773865-32.253588 72.048943-72.049966 72.048943-39.802518 0-72.048943-32.275077-72.048943-72.048943C705.447339 425.456948 737.694787 393.186987 777.496282 393.186987L777.496282 393.186987zM733.863529 404.406516"  ></path></symbol><symbol id="v-icon-trash" viewBox="0 0 1024 1024"><path d="M981.333333 213.333333l-192 0-98.133333 0L618.666667 213.333333 405.333333 213.333333l-72.533333 0L298.666667 213.333333 42.666667 213.333333c-23.466667 0-42.666667-19.2-42.666667-42.666667s19.2-42.666667 42.666667-42.666667l277.333333 0L320 85.333333c0-46.933333 38.4-85.333333 85.333333-85.333333l213.333333 0c46.933333 0 85.333333 38.4 85.333333 85.333333l0 42.666667 277.333333 0c23.466667 0 42.666667 19.2 42.666667 42.666667S1004.8 213.333333 981.333333 213.333333zM618.666667 106.666667c0-12.8-8.533333-21.333333-21.333333-21.333333l-170.666667 0c-12.8 0-21.333333 8.533333-21.333333 21.333333l0 21.333333 213.333333 0L618.666667 106.666667zM341.333333 810.666667 341.333333 341.333333c0-23.466667 19.2-42.666667 42.666667-42.666667 23.466667 0 42.666667 19.2 42.666667 42.666667l0 469.333333c0 23.466667-19.2 42.666667-42.666667 42.666667C360.533333 853.333333 341.333333 834.133333 341.333333 810.666667zM597.333333 810.666667 597.333333 341.333333c0-23.466667 19.2-42.666667 42.666667-42.666667 23.466667 0 42.666667 19.2 42.666667 42.666667l0 469.333333c0 23.466667-19.2 42.666667-42.666667 42.666667C616.533333 853.333333 597.333333 834.133333 597.333333 810.666667zM128 256c23.466667 0 42.666667 19.2 42.666667 42.666667l0 106.666667 0 512c0 12.8 8.533333 21.333333 21.333333 21.333333l640 0c12.8 0 21.333333-8.533333 21.333333-21.333333L853.333333 384l0-85.333333c0-23.466667 19.2-42.666667 42.666667-42.666667s42.666667 19.2 42.666667 42.666667l0 85.333333 0 554.666667c0 46.933333-38.4 85.333333-85.333333 85.333333L170.666667 1024c-46.933333 0-85.333333-38.4-85.333333-85.333333L85.333333 405.333333l0-21.333333 0-85.333333C85.333333 275.2 104.533333 256 128 256z"  ></path></symbol><symbol id="v-icon-createicon" viewBox="0 0 1024 1024"><path d="M425.396383 555.773581 431.371301 561.74849 852.57519 140.54461 814.060439 102.029857 392.856547 523.233737 397.485239 527.862435 355.764622 678.571814 495.194066 647.358507 496.733003 648.897427 499.159706 646.470743 501.690154 645.904253 500.789814 644.840622 925.298594 220.331836 886.783842 181.817091 465.477263 603.123668 425.396383 555.773581 425.396383 555.773581ZM44.988027 196.085106 12.307176 196.085106 12.307176 1023.999999 44.988027 1023.999999 840.222068 1023.999999 840.222068 991.319148 840.222068 991.319148 840.222068 370.382978 796.6476 392.170212 796.6476 980.425531 55.881644 980.425531 55.881644 980.425531 55.881644 239.659574 644.136962 239.659574 665.924196 196.085106 44.988027 196.085106 44.988027 196.085106ZM884.769233 27.03553C901.827657 9.977109 929.364418 9.856704 946.619979 27.112265L1000.236757 80.729042C1017.337559 97.829842 1017.429165 125.464114 1000.313491 142.579788L954.170992 188.722287 838.626735 73.178029 884.769233 27.03553Z"  ></path></symbol><symbol id="v-icon-iosspeedometeroutline" viewBox="0 0 1024 1024"><path d="M512 128C264.576 128 64 328.452 64 575.876c0 113.95 42.566 217.94 112.632 297 7.102 8.012 14.482 15.64 22.132 23.124 6.118-6.98 12.464-13.668 19.078-20.282 0.96-0.96 1.944-1.894 2.912-2.844 37.56-36.852 81.042-65.898 129.328-86.322 51.266-21.684 105.742-32.678 161.916-32.678s110.65 10.994 161.916 32.678c48.288 20.424 91.768 49.47 129.328 86.322 0.968 0.95 1.952 1.882 2.912 2.844 6.614 6.614 12.96 13.3 19.078 20.282 7.65-7.484 15.032-15.114 22.132-23.124 70.066-79.06 112.632-183.05 112.632-297C960 328.452 759.424 128 512 128zM895.322 738.354c-17.326 40.962-40.858 78.184-70.088 111.552-80.78-79.02-191.306-127.89-313.234-127.89s-232.456 48.66-313.234 127.68c-29.23-33.37-52.762-70.344-70.088-111.306-19.62-46.38-30.456-95.388-32.346-145.388L159 593.002l0-32L96.332 561.002c1.89-50 12.726-100.096 32.346-146.478 18.744-44.314 44.752-84.862 77.384-120.22l53.864 53.786 10.992-11.076 10.554-10.528-0.04-0.054 1.094-1.104-53.902-53.968c35.724-33.294 76.008-59.788 120.958-78.8 46.382-19.62 95.416-30.458 145.416-32.348L494.998 235l32 0L526.998 160.208c52 1.89 100.034 12.726 146.416 32.346 44.874 18.98 85.842 45.412 121.524 78.624l-53.95 54.138 1.154 1.094-0.008 0.038 10.57 10.492 11 11.006 54.052-54.114c32.712 35.406 58.784 76.296 77.56 120.69 19.62 46.382 30.458 96.478 32.348 146.478L863 561l0 32 64.668 0C925.778 643 914.942 691.972 895.322 738.354z"  ></path><path d="M736.958 349.09l-170.968 147.454c-15.394-10.51-33.984-16.668-53.988-16.668-52.934 0-96 43.066-96 96 0 20.958 6.77 40.356 18.212 56.16l-23.896 23.896 22.624 22.626 24.066-24.066c15.59 10.938 34.546 17.382 54.992 17.382 52.934 0 96-43.066 96-96 0-20.774-6.654-40.01-17.912-55.736l149.698-168.22L736.958 349.09zM512 639.876c-35.346 0-64-28.652-64-64 0-35.346 28.654-64 64-64s64 28.654 64 64C576 611.222 547.346 639.876 512 639.876z"  ></path></symbol><symbol id="v-icon-iostrashoutline" viewBox="0 0 1024 1024"><path d="M800 226.6l-160 0 0-40c0-32.4-26.2-58.6-58.6-58.6l-139 0C410.2 128 384 154.2 384 186.6l0 40-160 0L224 256l42.2 0 47.2 581.4c0 32.4 26.2 58.6 58.6 58.6l282 0c32.4 0 58.6-26.2 58.6-58.6L759.2 256 800 256 800 226.6zM413.2 186.6c0-16.2 13.2-29.4 29.2-29.4l139 0c16.2 0 29.2 13.2 29.2 29.4l0 40-197.4 0L413.2 186.6zM683.2 835.8l0 0.8 0 0.8c0 16.2-13.2 29.4-29.2 29.4L372 866.8c-16.2 0-29.2-13.2-29.2-29.4l0-0.8 0-0.8L295.4 256l434.4 0L683.2 835.8z"  ></path><path d="M498 320l28 0 0 482-28 0 0-482Z"  ></path><path d="M640 320 610.8 320 589.4 802 618.6 802Z"  ></path><path d="M413 320 384 320 405.4 802 434.6 802Z"  ></path></symbol><symbol id="v-icon-jinjidingdan" viewBox="0 0 1025 1024"><path d="M506.772638 387.53813c-4.465606 4.776362-6.425993 10.283203-6.061763 16.407521 0.43183 5.995172 2.511273 13.341326 6.614666 21.790261l41.25994-34.157952c-9.123921-7.222053-17.323646-10.892608-24.304561-11.260874C517.426125 379.947811 511.488463 382.396529 506.772638 387.53813z"  ></path><path d="M506.663671 16.478147c-277.79581 0-503.027421 225.231611-503.027421 503.027421s225.231611 503.02843 503.027421 503.02843c277.792783 0 503.02843-225.231611 503.02843-503.02843S784.457464 16.478147 506.663671 16.478147zM267.123153 294.151874c12.711742-13.999161 19.033814-24.072502 19.033814-30.457129 0-7.249295-6.138443-12.650196-18.360845-16.212794l0-10.191389 154.436721-31.806093c-4.545313 22.963668-12.038774 41.997482-22.474328 56.857275l20.387822-4.051937c30.395583-7.24425 57.594817-10.806847 81.667319-10.806847l193.793784 0c34.508057 3.563606 52.192906 16.951344 53.053539 39.915012 0 5.895286-18.111635 28.736871-54.403512 68.406709l4.052946 0c54.896888 0 82.344323 27.26078 82.344323 81.913502L780.654737 567.76862 326.317153 567.76862c-14.060706 0-34.509066 5.161781-61.219969 15.476261l-34.69673-39.17747L658.210764 544.06741l0-69.140214L352.844427 474.927196c-16.335885 0-39.421636 6.138443-69.389425 18.296272l-34.01569-41.997482L645.255865 451.225987c3.68468 0 7.980783-0.370284 12.954899-1.353l0-33.155057c0-24.810044-14.059697-37.212039-42.185146-37.212039L326.317153 379.505891c-13.632912 0-33.160102 3.558561-58.521031 10.806847l-34.691685-34.509066 325.13971 0 55.078499-65.703736c0-12.650196-7.921255-18.915767-23.822283-18.915767l-87.686706 0c-24.500297 0-51.271736 3.074266-80.317346 9.457883l-48.263052 9.458892c-1.843349 1.348964-3.625152 2.698937-5.405946 4.051937-33.155057 23.457044-80.56252 38.805168-142.215328 46.054464l-5.40191-13.50982C237.893915 319.451258 253.49125 308.644411 267.123153 294.151874zM645.255865 713.302379c-3.563606 32.9119-18.789648 50.473658-45.565123 52.804329-27.137688 0-42.125618-19.400062-44.823546-58.208257-5.033644-38.806177-18.422391-74.052785-40.159177-105.619756l10.867384-13.627867c37.150493 20.754071 68.467246 44.456289 93.89073 71.105646C636.656597 676.950973 645.255865 694.757906 645.255865 713.302379zM294.388977 738.353562c-16.828252 34.75424-47.896803 66.808534-93.212717 96.160864l-7.493461-7.493461c18.112644-50.106401 27.876238-98.613618 29.230247-145.528715 0-17.68384-8.842425-28.245513-26.527274-31.804075L196.385773 633.350273l135.337326-39.298544C326.748983 655.459361 314.283424 703.60033 294.388977 738.353562zM674.54564 812.77663c-17.684849 12.650196-45.992918 19.032805-85.046287 19.032805L453.485022 831.809435c-56.674655 0-85.04427-20.998236-85.04427-62.999754L368.440753 655.087059c0-11.790572-5.156736-20.631988-15.596326-26.404182l0-13.632912 129.93138-31.805084 0 198.460171c2.213633 17.560749 13.753986 26.404182 34.635184 26.404182l72.088362 0c35.36869 0 58.947816-5.034653 70.73738-14.982885 14.491527-9.946214 28.12444-25.914842 40.836182-48.017877l18.356809 7.492452C706.717981 779.616529 691.79866 799.761195 674.54564 812.77663zM777.890218 831.810444c-27.632073 0-42.617985-18.544474-44.828591-55.507302-6.383617-62.756597-21.552149-119.862074-45.560079-171.322483l10.807856-13.631903c38.133209 32.055303 69.877756 68.406709 95.300231 109.054217 18.052107 26.653393 27.137688 53.670007 27.137688 81.30208C817.127216 813.760355 802.819317 830.462489 777.890218 831.810444z"  ></path></symbol><symbol id="v-icon-eye" viewBox="0 0 1024 1024"><path d="M512 128q69.674667 0 135.509333 21.162667t115.498667 54.997333 93.482667 74.837333 73.685333 82.005333 51.669333 74.837333 32.170667 54.826667l9.984 21.333333q-2.346667 4.992-6.314667 13.482667t-18.816 34.688-31.658667 51.669333-44.330667 59.989333-56.832 64.341333-69.504 60.16-82.346667 51.498667-94.848 34.688-107.349333 13.482667q-69.674667 0-135.509333-21.162667t-115.498667-54.826667-93.482667-74.325333-73.685333-81.493333-51.669333-74.496-32.170667-54.997333l-9.984-20.992q2.346667-4.992 6.314667-13.482667t18.816-34.816 31.658667-51.84 44.330667-60.330667 56.832-64.682667 69.504-60.330667 82.346667-51.84 94.848-34.816 107.349333-13.482667zM512 213.333333q-46.677333 0-91.648 12.330667t-81.152 31.829333-70.656 47.146667-59.648 54.485333-48.853333 57.685333-37.674667 52.821333-26.325333 43.989333q12.330667 21.674667 26.325333 43.52t37.674667 52.352 48.853333 57.002667 59.648 53.845333 70.656 46.677333 81.152 31.488 91.648 12.16 91.648-12.330667 81.152-31.658667 70.656-46.848 59.648-54.186667 48.853333-57.344 37.674667-52.650667 26.325333-43.648q-12.330667-21.674667-26.325333-43.648t-37.674667-52.650667-48.853333-57.344-59.648-54.186667-70.656-46.848-81.152-31.658667-91.648-12.330667zM512 341.333333q70.656 0 120.661333 50.005333t50.005333 120.661333-50.005333 120.661333-120.661333 50.005333-120.661333-50.005333-50.005333-120.661333 50.005333-120.661333 120.661333-50.005333zM512 426.666667q-35.328 0-60.330667 25.002667t-25.002667 60.330667 25.002667 60.330667 60.330667 25.002667 60.330667-25.002667 25.002667-60.330667-25.002667-60.330667-60.330667-25.002667z"  ></path></symbol><symbol id="v-icon-star" viewBox="0 0 1024 1024"><path d="M539.978 101.722l114.291 231.579a31.201 31.201 0 0 0 23.492 17.068l255.563 37.135c25.591 3.719 35.809 35.167 17.292 53.218L765.688 620.981a31.2 31.2 0 0 0-8.973 27.616l43.655 254.53c4.371 25.488-22.38 44.924-45.27 32.89L526.519 815.844a31.197 31.197 0 0 0-29.037 0L268.899 936.017c-22.889 12.034-49.641-7.403-45.27-32.89l43.655-254.53a31.2 31.2 0 0 0-8.973-27.616L73.385 440.722c-18.518-18.05-8.299-49.499 17.292-53.218l255.563-37.135a31.201 31.201 0 0 0 23.492-17.068l114.291-231.579c11.443-23.19 44.511-23.19 55.955 0z"  ></path></symbol><symbol id="v-icon-person" viewBox="0 0 1024 1024"><path d="M652 684.8H370.9c-26.2 0-51.3 4.9-74.8 13.7-73.2 27.9-121.3 93.7-121.3 165.8v28.9h673.3v-28.9c0-59.7-32.6-115.9-87.7-149.2-10.2-6.6-21.4-12.2-33.7-16.6-11.8-4.4-23.8-7.8-36.3-10.3-12.8-2.1-25.6-3.4-38.4-3.4z m23.2-67.9c9.9 1 19.8 2.4 29.7 3.9 17.1 2.9 34.2 7.8 50.8 14.2 100.4 38.1 167.7 130 167.7 229.3v63.4c0 18.8-16.8 34.5-37.4 34.5H137c-20.8 0-37.7-15.7-37.7-34.5V864.4c0-99.8 66.5-190.7 167.8-229.4 25.4-9.3 52.6-15.6 80.4-18.1-97.8-52.3-159.2-150.6-159.2-254.8 0-162.8 147-295.9 323.3-295.9 177.6 0 323.2 134.5 323.2 295.9-0.1 104.1-61 201.9-159.6 254.8zM511.5 135.1c-99.4 0-190.8 55.8-229.2 139.9-12.3 27.4-18.7 56.7-18.7 87.1 0 90.7 59.8 174.1 151.2 209.3 61.4 24 131.4 23.5 192.9 0 91.9-35.7 151.8-118.6 151.8-209.3-0.1-123.8-110.7-227-248-227z"  ></path></symbol><symbol id="v-icon-shaixuan" viewBox="0 0 1024 1024"><path d="M911.36 219.136c57.344-63.488 28.672-126.976-57.344-126.976h-684.032c-86.016 0-114.688 61.44-59.392 126.976l251.904 299.008v280.576c0 12.288 8.192 20.48 20.48 20.48s20.48-8.192 20.48-20.48v-294.912l-262.144-311.296c-32.768-38.912-22.528-59.392 28.672-59.392h686.08c49.152 0 59.392 20.48 26.624 57.344l-278.528 313.344V911.36c0 12.288 8.192 20.48 20.48 20.48s20.48-8.192 20.48-20.48v-391.168l266.24-301.056z"  ></path></symbol><symbol id="v-icon-password" viewBox="0 0 1024 1024"><path d="M136.533568 460.565045V947.412741A25.599984 25.599984 0 0 0 162.176219 972.799392h691.114234c14.335991 0 25.642651-11.30666 25.642651-25.365317V460.586379a25.599984 25.599984 0 0 0-25.642651-25.365318H162.176219c-14.335991 0-25.642651 11.30666-25.642651 25.365318z m-51.199968 0A76.543952 76.543952 0 0 1 162.176219 383.99976h691.114234a76.799952 76.799952 0 0 1 76.842619 76.565285V947.412741A76.543952 76.543952 0 0 1 853.290453 1023.99936H162.176219A76.799952 76.799952 0 0 1 85.3336 947.434075V460.586379z"  ></path><path d="M290.133472 217.599864c0-91.733276 74.60262-166.399896 166.421229-166.399896H546.133312a166.442563 166.442563 0 0 1 166.421229 166.399896v91.519943s7.082662 17.557322 27.221317 17.557322c20.159987 0 23.978652-17.535989 23.978651-17.535989V217.599864C763.733176 97.429272 666.239904 0 546.111979 0H456.533368C336.362776 0 238.933504 97.663939 238.933504 217.599864v191.99988l51.199968-9.813327V217.599864z m0 0c0-91.733276 74.60262-166.399896 166.421229-166.399896H546.133312a166.442563 166.442563 0 0 1 166.421229 166.399896v91.519943h51.199968V217.599864C763.733176 97.429272 666.239904 0 546.111979 0H456.533368C336.362776 0 238.933504 97.663939 238.933504 217.599864v191.99988l51.199968-9.813327V217.599864zM495.829343 576.831639v241.130516a25.599984 25.599984 0 1 0 51.199968 0V576.831639a25.599984 25.599984 0 1 0-51.199968 0z"  ></path></symbol><symbol id="v-icon-yichuli" viewBox="0 0 1024 1024"><path d="M153.6 51.2h716.8a51.2 51.2 0 0 1 51.2 51.2v819.2a51.2 51.2 0 0 1-51.2 51.2H153.6a51.2 51.2 0 0 1-51.2-51.2V102.4a51.2 51.2 0 0 1 51.2-51.2z m0 51.2v819.2h716.8V102.4H153.6z m102.4 153.6h512v51.2H256V256z m0 204.8h358.4v51.2H256V460.8z m302.592 332.8l223.3856-230.4 37.2224 38.4L558.592 870.4 409.6 716.8l37.2224-38.4 111.7184 115.2z"  ></path></symbol><symbol id="v-icon-dingtalk" viewBox="0 0 1024 1024"><path d="M573.7 252.5C422.5 197.4 201.3 96.7 201.3 96.7c-15.7-4.1-17.9 11.1-17.9 11.1-5 61.1 33.6 160.5 53.6 182.8 19.9 22.3 319.1 113.7 319.1 113.7S326 357.9 270.5 341.9c-55.6-16-37.9 17.8-37.9 17.8 11.4 61.7 64.9 131.8 107.2 138.4 42.2 6.6 220.1 4 220.1 4s-35.5 4.1-93.2 11.9c-42.7 5.8-97 12.5-111.1 17.8-33.1 12.5 24 62.6 24 62.6 84.7 76.8 129.7 50.5 129.7 50.5 33.3-10.7 61.4-18.5 85.2-24.2L565 743.1h84.6L603 928l205.3-271.9H700.8l22.3-38.7c0.3 0.5 0.4 0.8 0.4 0.8S799.8 496.1 829 433.8l0.6-1h-0.1c5-10.8 8.6-19.7 10-25.8 17-71.3-114.5-99.4-265.8-154.5z"  ></path></symbol><symbol id="v-icon-chaosongwode" viewBox="0 0 1024 1024"><path d="M647.888 893.84L491.904 571.52l393.888-393.888-237.904 716.208zM872.32 123.232L459.872 535.68 134.96 380.88 872.32 123.232z m90.72-68.32a23.968 23.968 0 0 0-24.784-5.568L64.08 354.816a23.984 23.984 0 0 0-2.4 44.32l381.392 181.728 187.36 387.088a24.048 24.048 0 0 0 23.152 13.504 24.032 24.032 0 0 0 21.232-16.4L968.96 79.552c2.88-8.672 0.592-18.24-5.92-24.64z" fill="#797979" ></path></symbol><symbol id="v-icon-ios-folder-open" viewBox="0 0 1024 1024"><path d="M896 238c0-26.6-18.8-46-45.6-46H461.8c-5.6 0-8.6-1.2-12.2-4.8l-45-45-0.4-0.4c-9.8-9.2-17.8-13.8-34.6-13.8H177.4C149.8 128 128 148.6 128 174v146h768v-82zM128 376h-16.6c-25.6 0-50.6 10.2-47 48.6C68 463 111.4 846 111.4 846c5.4 35.6 23.4 50 50 50h705c25.4 0 42-15.6 46-50 0 0 44.4-369.8 47.2-411 2.8-41-17.8-59-47.2-59H128z" fill="" ></path></symbol><symbol id="v-icon-ios-git-network" viewBox="0 0 1024 1024"><path d="M754.8 64c-77.8 0-141.2 63.4-141.2 141.4 0 34.2 12.4 67.4 35 93.2 20 23 47 38.8 76.4 45v86.2L512 540.6l-212.8-110.8v-86.2c64.4-13.8 111.4-71.2 111.4-138.2 0-78-63.4-141.4-141.2-141.4S128 127.4 128 205.4c0 34.2 12.4 67.4 35 93.2 20 23 47 38.8 76.4 45v114.8c0 5.4 3 10.2 7.8 12.6l235 121.6v87.8c-64.4 13.8-111.4 71.2-111.4 138.2 0 78 63.4 141.4 141.2 141.4s141.2-63.4 141.2-141.4c0-34.2-12.4-67.4-35-93.2-20-23-47-38.8-76.4-45v-87.8l235-121.6c4.8-2.4 7.8-7.2 7.8-12.6v-114.8c64.4-13.8 111.4-71.2 111.4-138.2 0-78-63.4-141.4-141.2-141.4zM187.6 205.4c0-45 36.6-81.6 81.6-81.6s81.6 36.6 81.6 81.6c0 45-36.6 81.6-81.6 81.6s-81.6-36.6-81.6-81.6z m406 613.2c0 45-36.6 81.6-81.6 81.6s-81.6-36.6-81.6-81.6c0-45 36.6-81.6 81.6-81.6s81.6 36.6 81.6 81.6z m161.2-531.4c-45 0-81.6-36.6-81.6-81.6 0-45 36.6-81.6 81.6-81.6 45 0 81.6 36.6 81.6 81.6 0 44.8-36.6 81.6-81.6 81.6z" fill="" ></path></symbol><symbol id="v-icon-md-git-branch" viewBox="0 0 1024 1024"><path d="M832 320c0-70.6-57.4-128-128-128s-128 57.4-128 128c0 47.4 25.8 88.6 64 110.8v17.2c0 39.8-15.6 67.4-50.6 89.8-30.8 19.6-76.2 34.2-135 43-28 4.2-51.4 12-70.4 21.4V302.8c38.2-22.2 64-63.4 64-110.8 0-70.6-57.4-128-128-128S192 121.4 192 192c0 47.4 25.8 88.6 64 110.8v418.4c-38.2 22.2-64 63.4-64 110.8 0 70.6 57.4 128 128 128s128-57.4 128-128c0-33.2-12.6-63.4-33.4-86.2 3.8-9.8 19.4-32.6 58.8-38.6 77.6-11.6 137.8-31.8 184.6-61.6 72-45.6 110-114 110-197.6v-17.2c38.2-22.2 64-63.4 64-110.8zM320 112c44.2 0 80 35.8 80 80s-35.8 80-80 80-80-35.8-80-80 35.8-80 80-80z m0 800c-44.2 0-80-35.8-80-80s35.8-80 80-80 80 35.8 80 80-35.8 80-80 80z m384-512c-44.2 0-80-35.8-80-80s35.8-80 80-80 80 35.8 80 80-35.8 80-80 80z"  ></path></symbol><symbol id="v-icon-ios-arrow-dropright" viewBox="0 0 1024 1024"><path d="M421.4 295.2c15-15 39.6-15 54.6 0l190.8 191.4c14.6 14.6 15 38.2 1.2 53.2l-188 188.6c-7.6 7.6-17.4 11.4-27.4 11.4-9.8 0-19.8-3.8-27.2-11.2-15-15-15.2-39.4 0-54.6l159.8-162.2-163.8-162.2c-15.2-14.8-15.2-39.2 0-54.4z"  ></path><path d="M96 512c0 229.8 186.2 416 416 416s416-186.2 416-416S741.8 96 512 96 96 282.2 96 512z m64 0c0-94 36.6-182.4 103.2-248.8C329.6 196.6 418 160 512 160s182.4 36.6 248.8 103.2C827.4 329.6 864 418 864 512s-36.6 182.4-103.2 248.8C694.4 827.4 606 864 512 864s-182.4-36.6-248.8-103.2C196.6 694.4 160 606 160 512z"  ></path></symbol></svg>';if((t=document.getElementsByTagName("script"))[t.length-1].getAttribute("data-injectcss")&&!e.__iconfont__svg__cssinject__){e.__iconfont__svg__cssinject__=!0;try{document.write("<style>.svgfont {display: inline-block;width: 1em;height: 1em;fill: currentColor;vertical-align: -0.1em;font-size:16px;}</style>")}catch(t){console&&console.log(t)}}!function(t){if(document.addEventListener)if(~["complete","loaded","interactive"].indexOf(document.readyState))setTimeout(t,0);else{document.addEventListener("DOMContentLoaded",function e(){document.removeEventListener("DOMContentLoaded",e,!1),t()},!1)}else document.attachEvent&&(s=t,i=e.document,a=!1,(o=function(){try{i.documentElement.doScroll("left")}catch(e){return void setTimeout(o,50)}n()})(),i.onreadystatechange=function(){"complete"==i.readyState&&(i.onreadystatechange=null,n())});function n(){a||(a=!0,s())}var s,i,a,o}(function(){var e,t;(e=document.createElement("div")).innerHTML=n,n=null,(t=e.getElementsByTagName("svg")[0])&&(t.setAttribute("aria-hidden","true"),t.style.position="absolute",t.style.width=0,t.style.height=0,t.style.overflow="hidden",function(e,t){t.firstChild?function(e,t){t.parentNode.insertBefore(e,t)}(e,t.firstChild):t.appendChild(e)}(t,document.body))})}(window)},"4XXa":function(e,t){},"6LRO":function(e,t,n){"use strict";n.d(t,"a",function(){return i}),n.d(t,"c",function(){return a}),n.d(t,"b",function(){return o});var s=n("vLgD"),i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(s.a)({url:"/api/oa/flow/alllist",data:e,method:"post"})},a=function(e){return Object(s.a)({url:"/api/oa/flow/ifstrtest",data:e,method:"post"})},o=function(e){return Object(s.a)({url:"/api/"+window.oaname+"/flowdesigns/cancreattreelist",data:e,method:"post"})}},"6qid":function(e,t){},"8mpL":function(e,t){},"8qP0":function(e,t,n){"use strict";n.d(t,"c",function(){return i}),n.d(t,"d",function(){return a}),n.d(t,"b",function(){return o}),n.d(t,"a",function(){return r});var s=n("vLgD"),i=function(){return Object(s.a)({url:"/api/dept/contact/getlists",method:"post"})},a=function(){var e=new Date;return Object(s.a)({url:"/api/employee/contact/getusersbydept?date="+e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate(),method:"post",timeout:6e4})},o=function(){var e=new Date;return Object(s.a)({url:"/api/employee/contact/getroletree?date="+e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate(),method:"post"})},r=function(e){return Object(s.a)({url:"/api/oa/flowdesigns/testconcactset",method:"post",data:e})}},Arqy:function(e,t){},DmJO:function(e,t){},IcnI:function(e,t,n){"use strict";var s=n("lRwf"),i=n.n(s),a=n("NYxO"),o=n("lbHh"),r=n.n(o),l={state:{sidebar:{opened:!r.a.get("sidebarStatus")||!!+r.a.get("sidebarStatus"),withoutAnimation:!1},device:"desktop",language:r.a.get("language")||"en",size:r.a.get("size")||"medium"},mutations:{TOGGLE_SIDEBAR:function(e){e.sidebar.opened=!e.sidebar.opened,e.sidebar.withoutAnimation=!1,e.sidebar.opened?r.a.set("sidebarStatus",1):r.a.set("sidebarStatus",0)},CLOSE_SIDEBAR:function(e,t){r.a.set("sidebarStatus",0),e.sidebar.opened=!1,e.sidebar.withoutAnimation=t},TOGGLE_DEVICE:function(e,t){e.device=t},SET_LANGUAGE:function(e,t){e.language=t,r.a.set("language",t)},SET_SIZE:function(e,t){e.size=t,r.a.set("size",t)}},actions:{toggleSideBar:function(e){(0,e.commit)("TOGGLE_SIDEBAR")},closeSideBar:function(e,t){(0,e.commit)("CLOSE_SIDEBAR",t.withoutAnimation)},toggleDevice:function(e,t){(0,e.commit)("TOGGLE_DEVICE",t)},setLanguage:function(e,t){(0,e.commit)("SET_LANGUAGE",t)},setSize:function(e,t){(0,e.commit)("SET_SIZE",t)}}},c={state:{logs:[]},mutations:{ADD_ERROR_LOG:function(e,t){e.logs.push(t)}},actions:{addErrorLog:function(e,t){(0,e.commit)("ADD_ERROR_LOG",t)}}},u=n("Gu7T"),d=n.n(u),h=n("//Fk"),p=n.n(h),f=n("BO1k"),v=n.n(f),m=n("d7EF"),_=n.n(m),y=n("woOf"),g=n.n(y),b={state:{visitedViews:[],cachedViews:[]},mutations:{ADD_VISITED_VIEW:function(e,t){e.visitedViews.some(function(e){return e.path===t.path})||e.visitedViews.push(g()({},t,{title:t.meta.title||"no-name"}))},ADD_CACHED_VIEW:function(e,t){e.cachedViews.includes(t.name)||t.meta.noCache||e.cachedViews.push(t.name)},DEL_VISITED_VIEW:function(e,t){var n=!0,s=!1,i=void 0;try{for(var a,o=v()(e.visitedViews.entries());!(n=(a=o.next()).done);n=!0){var r=a.value,l=_()(r,2),c=l[0];if(l[1].path===t.path){e.visitedViews.splice(c,1);break}}}catch(e){s=!0,i=e}finally{try{!n&&o.return&&o.return()}finally{if(s)throw i}}},DEL_CACHED_VIEW:function(e,t){var n=!0,s=!1,i=void 0;try{for(var a,o=v()(e.cachedViews);!(n=(a=o.next()).done);n=!0){var r=a.value;if(r===t.name){var l=e.cachedViews.indexOf(r);e.cachedViews.splice(l,1);break}}}catch(e){s=!0,i=e}finally{try{!n&&o.return&&o.return()}finally{if(s)throw i}}},DEL_OTHERS_VISITED_VIEWS:function(e,t){var n=!0,s=!1,i=void 0;try{for(var a,o=v()(e.visitedViews.entries());!(n=(a=o.next()).done);n=!0){var r=a.value,l=_()(r,2),c=l[0];if(l[1].path===t.path){e.visitedViews=e.visitedViews.slice(c,c+1);break}}}catch(e){s=!0,i=e}finally{try{!n&&o.return&&o.return()}finally{if(s)throw i}}},DEL_OTHERS_CACHED_VIEWS:function(e,t){var n=!0,s=!1,i=void 0;try{for(var a,o=v()(e.cachedViews);!(n=(a=o.next()).done);n=!0){var r=a.value;if(r===t.name){var l=e.cachedViews.indexOf(r);e.cachedViews=e.cachedViews.slice(l,l+1);break}}}catch(e){s=!0,i=e}finally{try{!n&&o.return&&o.return()}finally{if(s)throw i}}},DEL_ALL_VISITED_VIEWS:function(e){e.visitedViews=[]},DEL_ALL_CACHED_VIEWS:function(e){e.cachedViews=[]},UPDATE_VISITED_VIEW:function(e,t){var n=!0,s=!1,i=void 0;try{for(var a,o=v()(e.visitedViews);!(n=(a=o.next()).done);n=!0){var r=a.value;if(r.path===t.path){r=g()(r,t);break}}}catch(e){s=!0,i=e}finally{try{!n&&o.return&&o.return()}finally{if(s)throw i}}}},actions:{addView:function(e,t){var n=e.dispatch;n("addVisitedView",t),n("addCachedView",t)},addVisitedView:function(e,t){(0,e.commit)("ADD_VISITED_VIEW",t)},addCachedView:function(e,t){(0,e.commit)("ADD_CACHED_VIEW",t)},delView:function(e,t){var n=e.dispatch,s=e.state;return new p.a(function(e){n("delVisitedView",t),n("delCachedView",t),e({visitedViews:[].concat(d()(s.visitedViews)),cachedViews:[].concat(d()(s.cachedViews))})})},delVisitedView:function(e,t){var n=e.commit,s=e.state;return new p.a(function(e){n("DEL_VISITED_VIEW",t),e([].concat(d()(s.visitedViews)))})},delCachedView:function(e,t){var n=e.commit,s=e.state;return new p.a(function(e){n("DEL_CACHED_VIEW",t),e([].concat(d()(s.cachedViews)))})},delOthersViews:function(e,t){var n=e.dispatch,s=e.state;return new p.a(function(e){n("delOthersVisitedViews",t),n("delOthersCachedViews",t),e({visitedViews:[].concat(d()(s.visitedViews)),cachedViews:[].concat(d()(s.cachedViews))})})},delOthersVisitedViews:function(e,t){var n=e.commit,s=e.state;return new p.a(function(e){n("DEL_OTHERS_VISITED_VIEWS",t),e([].concat(d()(s.visitedViews)))})},delOthersCachedViews:function(e,t){var n=e.commit,s=e.state;return new p.a(function(e){n("DEL_OTHERS_CACHED_VIEWS",t),e([].concat(d()(s.cachedViews)))})},delAllViews:function(e,t){var n=e.dispatch,s=e.state;return new p.a(function(e){n("delAllVisitedViews",t),n("delAllCachedViews",t),e({visitedViews:[].concat(d()(s.visitedViews)),cachedViews:[].concat(d()(s.cachedViews))})})},delAllVisitedViews:function(e){var t=e.commit,n=e.state;return new p.a(function(e){t("DEL_ALL_VISITED_VIEWS"),e([].concat(d()(n.visitedViews)))})},delAllCachedViews:function(e){var t=e.commit,n=e.state;return new p.a(function(e){t("DEL_ALL_CACHED_VIEWS"),e([].concat(d()(n.cachedViews)))})},updateVisitedView:function(e,t){(0,e.commit)("UPDATE_VISITED_VIEW",t)}}},w=n("mvHQ"),D=n.n(w),T=n("vLgD"),L=n("TIfe");function k(e){return Object(T.a)({url:"/api/employee/getinfo?"+window.env.prod.postTokenKey+"="+e,method:"get"})}var S=n("0CXz"),C={state:{__realobj:null,id:"",user:"",status:"",code:"",jobid:"",token:Object(L.c)(),name:"",avatar:"",introduction:"",roles:[],depts:[],setting:{articlePlatform:[]},flowBadge:{cc:0,message:0,waiting:0,needcreat:0,waitingListRefresh:!1}},mutations:{setUserDepts:function(e,t){console.log("setUserDepts"),e.depts=t},setFlowBadge:function(e,t){e.flowBadge=g()(e.flowBadge,t)},setFlowBadgeCc:function(e,t){e.flowBadge.cc=t},setFlowBadgeMessage:function(e,t){e.flowBadge.message=t},setFlowBadgeWaiting:function(e,t){e.flowBadge.waiting=t},SET_CODE:function(e,t){e.code=t},SET_TOKEN:function(e,t){e.token=t},SET_INTRODUCTION:function(e,t){e.introduction=t},SET_SETTING:function(e,t){e.setting=t},SET_STATUS:function(e,t){e.status=t},SET_NAME:function(e,t){e.name=t},SET_ID:function(e,t){e.id=t},SET_JOBID:function(e,t){e.jobid=t},SET_AVATAR:function(e,t){e.avatar=t},SET_ROLES:function(e,t){e.roles=t},SET_DEPTS:function(e,t){e.depts=t},SET_REAL:function(e,t){var n=JSON.parse(D()(t));delete n.__realobj,e.__realobj=n}},actions:{ChangeUser:function(e,t){var n=e.commit;return new p.a(function(e,s){(function(e){return Object(T.a)({url:"/api/"+window.oaname+"/employee/testlogin",method:"post",data:e,canTest:!0})})(t).then(function(t){var i=t.data;console.log(i),i.success?(n("SET_TOKEN",i.data.token),Object(L.e)(i.data.token),e()):(alert(i.msg),s(i.msg))}).catch(function(e){s(e)})})},LoginByUsername:function(e,t){var n=e.commit,s=t.username.trim();return new p.a(function(e,i){var a,o;(a=s,o={userName:a},Object(T.a)({url:"/api/employee/login/getpkey",method:"post",data:o})).then(function(a){var o,r,l,c=a.data;console.log(c),c.success?(o=s,r=Object(L.a)(c.data,t.password),l={userName:o,password:r},Object(T.a)({url:"/api/employee/login",method:"post",data:l})).then(function(t){var s=t.data;console.log(s),s.success?(n("SET_TOKEN",s.data.token),Object(L.e)(s.data.token),e()):i(s.msg)}).catch(function(e){i(e)}):i(c.msg)}).catch(function(e){i(e)})})},GetUserInfo:function(e){var t=e.commit,n=e.state;return new p.a(function(e,s){k(n.token).then(function(i){var a=i.data;a.success||s(a.msg);var o=a.data;o.roles=o.roles.split("-");for(var r=o.roles.length-1;r>=0;r--)o.roles[r]||o.roles.splice(r,1);o.roles?t("SET_ROLES",o.roles):s("getInfo: roles must be a non-null array!"+D()(o)),t("SET_ID",o._uuid),t("SET_JOBID",o.jobid),t("SET_NAME",o.name),t("SET_AVATAR",o.avatar),t("SET_INTRODUCTION",o.introduction),t("SET_DEPTS",o.depts),t("SET_REAL",n),e(i)}).catch(function(e){s(e)})})},GetReplaceUserInfo:function(e){var t=e.commit;e.state;return new p.a(function(e,n){Object(T.a)({url:"/api/replace_emp/employee/getinfo?"+window.env.replace_emp.postTokenKey+"="+Object(L.c)(window.env.replace_emp.CookieTokenKey),method:"get"}).then(function(s){var i=s.data;i.success||n(i.msg);var a=i.data;a.roles=a.roles.split("-");for(var o=a.roles.length-1;o>=0;o--)a.roles[o]||a.roles.splice(o,1);a.roles?t("SET_ROLES",a.roles):n("getInfo: roles must be a non-null array!"+D()(a)),t("SET_ID",a._uuid),t("SET_JOBID",a.jobid),t("SET_NAME",a.name),t("SET_AVATAR",a.avatar),t("SET_INTRODUCTION",a.introduction),t("SET_DEPTS",a.depts),e(s)}).catch(function(e){n(e)})})},LogOut:function(e){var t=e.commit,n=e.state;return new p.a(function(e,s){(n.token,Object(T.a)({url:"/api/employee/logout",method:"post"})).then(function(){t("SET_TOKEN",""),t("SET_ROLES",[]),Object(L.d)(),e()}).catch(function(e){s(e)})})},FedLogOut:function(e){var t=e.commit;return new p.a(function(e){t("SET_TOKEN",""),Object(L.d)(),e()})},ChangeRoles:function(e,t){var n=e.commit,s=e.dispatch;return new p.a(function(e){n("SET_TOKEN",t),Object(L.e)(t),k(t).then(function(t){var i=t.data;n("SET_ROLES",i.roles),n("SET_NAME",i.name),n("SET_AVATAR",i.avatar),n("SET_INTRODUCTION",i.introduction),s("GenerateRoutes",i),e()})})},getFlowBadgeNumber:function(e){e.state;var t=e.commit;return new p.a(function(e,n){try{Object(S.w)({}).then(function(n){var s=n.data;if(s.success){var i=s.data;t("setFlowBadge",i),e(s)}else alert(s.msg)}).catch(function(e){n(e)})}catch(e){n(e)}})}}},E={sidebar:function(e){return e.app.sidebar},language:function(e){return e.app.language},size:function(e){return e.app.size},device:function(e){return e.app.device},visitedViews:function(e){return e.tagsView.visitedViews},cachedViews:function(e){return e.tagsView.cachedViews},token:function(e){return e.user.token},avatar:function(e){return e.user.avatar},name:function(e){return e.user.name},introduction:function(e){return e.user.introduction},status:function(e){return e.user.status},roles:function(e){return e.user.roles},setting:function(e){return e.user.setting},permission_routers:function(e){return e.permission.routers},addRouters:function(e){return e.permission.addRouters},errorLogs:function(e){return e.errorLog.logs}},O=n("8qP0"),x=n("6LRO"),R=n("Xlh3"),B={state:{set:{},layoutset:[],formSet:[],funList:[],RoleTrees:[],flowList:[],flowCanSonList:[],fileList:[]},mutations:{setfileList:function(e,t){e.fileList=t},setflowSet:function(e,t){e.set=t},setLayOutSet:function(e,t){e.layoutset=t},setformSet:function(e,t){e.formSet=t},setfunList:function(e,t){e.funList=t},setRoleTrees:function(e,t){e.RoleTrees=t},setFlowList:function(e,t){e.flowList=t},setFlowCanSonList:function(e,t){e.flowCanSonList=t}},getters:{requireDataList:function(e){return Object(R.c)(e.formSet)}},actions:{getFlowCanSonList:function(e){e.state;var t=e.commit;return new p.a(function(e,n){try{FlowCanSonList().then(function(n){var s=n.data;if(s.success){var i=s.data;t("setFlowCanSonList",i),e(s)}else alert(s.msg)}).catch(function(e){n(e)})}catch(e){n(e)}})},getFlowAllList:function(e){e.state;var t=e.commit;return new p.a(function(e,n){try{Object(x.a)().then(function(n){var s=n.data;if(s.success){var i=s.data;t("setFlowList",i),e(s)}else alert(s.msg)}).catch(function(e){n(e)})}catch(e){n(e)}})},getUserByDeptData:function(e){e.state;var t=e.commit;return new p.a(function(e,n){try{Object(O.d)().then(function(n){var s=n.data;if(s.success){var i=s.data;t("setuserByDepts",i),e(s)}else alert(s.msg)}).catch(function(e){n(e)})}catch(e){n(e)}})},GetRoleTree:function(e){e.state;var t=e.commit;return new p.a(function(e,n){try{Object(O.b)().then(function(n){var s=n.data;if(s.success){var i=s.data;t("setRoleTrees",i),e(s)}else alert(s.msg)}).catch(function(e){n(e)})}catch(e){n(e)}})},getDeptData:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){e.state;var t=e.commit;return new p.a(function(e,n){try{getDeptData().then(function(n){var s=n.data;if(s.success){var i=s.data;t("setdeptTree",creatDeptTree(i,"1")),e(s)}else alert(s.msg)}).catch(function(e){n(e)})}catch(e){n(e)}})})}},V=n("XbsD");i.a.use(a.a);var j=new a.a.Store({modules:{app:l,errorLog:c,tagsView:b,user:C,contact:V.a,flowdesign:B},getters:E});t.a=j},NHnr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});n("FO5P");var s=n("woHG"),i=n("lRwf"),a=n.n(i),o=n("l6IN"),r=n.n(o),l={name:"App",activated:function(){this.$setgoindex()},computed:{title:function(){var e=this.$route.meta.name;return e?e.replace(/-/g,""):""},visible:function(){return console.log("path:"+this.$route.path),-1==["/"].indexOf(this.$route.path)}},methods:{onBack:function(){var e=this,t=this.$route.path;if(window.history.length<=1)return this.$router.push({path:"/"}),!1;this.$router.go(-1),setTimeout(function(){e.$route.path==t&&"/"!=e.$route.path&&e.$router.push({path:"/"})},500)}}},c={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:e.isPc?"platform-pc":"platform-mobile",attrs:{id:"app"}},[n("van-nav-bar",{directives:[{name:"show",rawName:"v-show",value:e.title,expression:"title"}],staticClass:"van-doc-nav-bar",attrs:{fixed:"",title:e.title,"left-arrow":e.visible},on:{"click-left":e.onBack}}),e._v(" "),n("div",{staticStyle:{height:"46px"}}),e._v(" "),n("keep-alive",[e.$route.meta.keepAlive?n("router-view"):e._e()],1),e._v(" "),e.$route.meta.keepAlive?e._e():n("router-view")],1)},staticRenderFns:[]};var u=n("VU/8")(l,c,!1,function(e){n("uJjm")},null,null).exports,d=n("pRNm"),h=n.n(d),p=n("TIfe"),f=n("IcnI");a.a.use(h.a);var v=new h.a({mode:"hash",routes:[{path:"/login",component:function(){return n.e(6).then(n.bind(null,"T+/8"))}},{path:"*",name:"error",component:function(e){n.e(11).then(function(){e(n("thLP"))}.bind(null,n)).catch(n.oe)},meta:{title:"页面不存在"}},{path:"/",name:"workbench",component:function(){return n.e(9).then(n.bind(null,"KR8f"))},meta:{name:"工作台",requiresAuth:!0}},{path:"/flowchose",name:"flowchose",component:function(){return Promise.all([n.e(0),n.e(3)]).then(n.bind(null,"rDEE"))},meta:{requiresAuth:!0,name:"发起流程"}},{path:"/flowwaiting",name:"flowwaiting",component:function(){return Promise.all([n.e(0),n.e(12)]).then(n.bind(null,"b4lX"))},meta:{requiresAuth:!0,name:"待我处理",keepAlive:!0}},{path:"/flowmessage",name:"flowmessage",component:function(){return Promise.all([n.e(0),n.e(10)]).then(n.bind(null,"/zO5"))},meta:{requiresAuth:!0,name:"通知我",keepAlive:!0}},{path:"/flowcc",name:"flowcc",component:function(){return Promise.all([n.e(0),n.e(7)]).then(n.bind(null,"1LgG"))},meta:{requiresAuth:!0,name:"抄送我",keepAlive:!0}},{path:"/flowfinish",name:"flowfinish",component:function(){return Promise.all([n.e(0),n.e(5)]).then(n.bind(null,"l5mt"))},meta:{requiresAuth:!0,name:"我完成的",keepAlive:!0}},{path:"/flowicreat",name:"flowicreat",component:function(){return Promise.all([n.e(0),n.e(13)]).then(n.bind(null,"LQhR"))},meta:{requiresAuth:!0,name:"我创建的",keepAlive:!0}},{path:"/flowneedcreat",name:"flowneedcreat",component:function(){return Promise.all([n.e(0),n.e(4)]).then(n.bind(null,"5UQz"))},meta:{requiresAuth:!0,name:"待我创建",keepAlive:!0}},{path:"/flowdeal",name:"flowdeal",component:function(){return Promise.all([n.e(0),n.e(1)]).then(n.bind(null,"MdqL"))},meta:{requiresAuth:!0,name:"处理流程"}},{path:"/flowdetail",name:"flowdetail",component:function(){return Promise.all([n.e(0),n.e(2)]).then(n.bind(null,"+tnW"))},meta:{requiresAuth:!0,name:"流程明细"}}]});v.beforeEach(function(e,t,n){var s=Object(p.c)();e.meta.requiresAuth?s?f.a.getters.name?n():f.a.dispatch("GetUserInfo").then(function(e){n()}).catch(function(e){f.a.dispatch("FedLogOut").then(function(){o.Message.error(e),n({path:"/"})})}):n({path:"/login",query:{redirect:e.fullPath}}):n()});var m=v,_=n("PjWF"),y=n.n(_),g=(n("PnOH"),n("G8eI")),b=(n("kLyD"),n("2YZj"),n("Dd8w")),w=n.n(b),D=n("GXH0"),T=n.n(D),L=(n("DmJO"),n("NYxO")),k=n("8/0O"),S=n.n(k),C={name:"choseUsers",mixins:[S.a],components:{Treeselect:T.a},computed:w()({},Object(L.d)({userByDepts:function(e){return e.contact.userByDepts}})),props:{value:{type:Array,default:function(){return[]},isSync:!0},disabled:{type:Boolean,default:function(){return!1}},placeholder:{type:String,default:function(){return"请选择人员"}}},data:function(){return{multipleDeptTree:[],LEAF_PRIORITY:"LEAF_PRIORITY",users:[]}},watch:{users:function(){var e=[];this.users.forEach(function(t){var n=t.split("__");n.length>1&&e.push({id:n[1],name:n[2],deptid:n[0]})}),this.sync_value=e}},mounted:function(){var e=this;if(!this.disabled){var t=[];this.sync_value.constructor!=Array&&(this.sync_value=[]);for(var n=0;n<this.sync_value.length;n++){var s=this.sync_value[n];t.push(s.deptid+"__"+s.id+"__"+s.name)}this.users=t,this.disabled||(0==this.userByDepts.length?this.getUserByDeptData().then(function(t){e.multipleDeptTree=e.getnowUserdeptList(e.userByDepts,"multiple")}):this.multipleDeptTree=this.getnowUserdeptList(this.userByDepts,"multiple"))}},methods:w()({},Object(L.b)(["getUserByDeptData"]),{inputhander:function(){var e=this;setTimeout(function(){e.emitinput(e.sync_value)},10),setTimeout(function(){e.emitinput(e.sync_value)},20)},emitinput:function(e){var t=this.$parent||this.$root;console.log(t),window.myTree=t,t.unFristRender?t.$emit.apply(t,["el.form.change"].concat(e)):t.unFristRender=!0},getnowUserdeptList:function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"1",s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",i=[],a=0;a<e.length;a++){var o=e[a];if(o.deptname){var r={label:o.deptname};if(r.id="multiple"==t?o._uuid:null,o.children){if(!(o.children.length>0))continue;r.children=this.getnowUserdeptList(o.children,t,o._uuid,o.deptname)}i.push(r)}o.username&&i.push({id:n+"__"+o._uuid+"__"+o.username,label:(s?"<"+s+">":"")+o.username})}return i}})},E={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.disabled?n("div",[0==e.sync_value.length?n("span",[e._v("无")]):e._e(),e._v(" "),e._l(e.sync_value,function(t,s){return n("span",{key:s,staticClass:"usertag"},[e._v(e._s(t.name)+"\n            ")])})],2):n("treeselect",{ref:"myTree",attrs:{placeholder:e.placeholder,"disable-branch-nodes":!0,"value-consists-of":e.LEAF_PRIORITY,multiple:!0,options:e.multipleDeptTree},on:{input:e.inputhander},model:{value:e.users,callback:function(t){e.users=t},expression:"users"}})],1)},staticRenderFns:[]};var O=n("VU/8")(C,E,!1,function(e){n("6qid")},null,null).exports,x=n("mvHQ"),R=n.n(x),B={name:"ChoseDepts",components:{},mixins:[S.a],computed:w()({},Object(L.d)({userByDepts:function(e){return e.contact.userByDepts}})),watch:{deptids:function(){var e=this,t=[];this.deptids.forEach(function(n){for(var s=0;s<e.DeptTree.length;s++){var i=e.DeptTree[s];if(n==i.id){t.push({name:i.label,deptid:i.id});break}}}),this.sync_value=t,this.$emit("input",this.sync_value)}},props:{value:{type:Array,default:function(){return[]},isSync:!0},disabled:{type:Boolean,default:function(){return!1}},placeholder:{type:String,default:function(){return"请选择部门"}}},data:function(){return{DeptTree:[],deptids:[]}},mounted:function(){var e=this;this.disabled||(0==this.userByDepts.length?this.getUserByDeptData().then(function(t){e.DeptTree=e.getdeptList(e.userByDepts),e.DeptTree.unshift({id:"1",label:"全公司"})}):(this.DeptTree=this.getdeptList(this.userByDepts),this.DeptTree.unshift({id:"1",label:"全公司"})),this.deptids=[],"string"==typeof this.sync_value&&(this.sync_value=[]),this.sync_value.forEach(function(t){e.deptids.push(t.deptid)}))},methods:w()({},Object(L.b)(["getUserByDeptData"]),{copyobject:function(e){return JSON.parse(R()(e))},getdeptList:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=[],s=0;s<e.length;s++){var i=this.copyobject(t),a=e[s];if(a.deptname){var o={label:(i.join("-")?i.join("-")+"-":"")+a.deptname};if(i.push(a.deptname),o.id=a._uuid,n.push(o),a.children){if(!(a.children.length>0))continue;var r=this.getdeptList(a.children,i);r.length>0&&(n=n.concat(r))}}}return n}})},V={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.disabled?n("div",[e._l(e.sync_value,function(t,s){return n("span",{key:s,staticClass:"usertag"},[e._v("\n      "+e._s(t.name)+"\n    ")])}),e._v(" "),0==e.sync_value.length?n("span",[e._v("无")]):e._e()],2):n("div",[n("el-select",{attrs:{placeholder:e.placeholder,multiple:"",clearable:"",filterable:""},model:{value:e.deptids,callback:function(t){e.deptids=t},expression:"deptids"}},e._l(e.DeptTree,function(e){return n("el-option",{key:e.id,attrs:{label:e.label,value:e.id}})}),1)],1)])},staticRenderFns:[]};var j=n("VU/8")(B,V,!1,function(e){n("NmVa")},null,null).exports,I={name:"choseUsers",mixins:[S.a],components:{},computed:w()({},Object(L.d)({userByDepts:function(e){return e.contact.userByDepts}})),props:{value:{type:String,default:function(){return""},isSync:!0},disabled:{type:Boolean,default:function(){return!1}},placeholder:{type:String,default:function(){return"请选择人员"}}},data:function(){return{UserList:[]}},watch:{sync_value:function(){this.$emit("input",this.sync_value)}},mounted:function(){var e=this;this.disabled||(0==this.userByDepts.length?this.getUserByDeptData().then(function(t){e.UserList=e.getuserList(e.userByDepts)}):this.UserList=this.getuserList(this.userByDepts))},methods:w()({},Object(L.b)(["getUserByDeptData"]),{copyobject:function(e){return JSON.parse(R()(e))},getuserList:function(e){for(var t=[],n=0;n<e.length;n++){var s=e[n];if(s.username){var i={label:s.username+(s.userjobid?"("+s.userjobid+")":"")};i.id=s._uuid,t.push(i)}if(s.children){if(!(s.children.length>0))continue;var a=this.getuserList(s.children);a.length>0&&a.forEach(function(e){t.some(function(t){return t.label==e.label})||t.push(e)})}}return t}})},A={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.disabled?n("div",[n("span",{staticClass:"usertag"},[e._v("\n             "+e._s(e.sync_value?e.sync_value:"无")+"\n            ")])]):n("div",[n("el-select",{attrs:{clearable:"",filterable:"",placeholder:e.placeholder},model:{value:e.sync_value,callback:function(t){e.sync_value=t},expression:"sync_value"}},e._l(e.UserList,function(e){return n("el-option",{key:e.id,attrs:{label:e.label,value:e.label}})}),1)],1)])},staticRenderFns:[]};var z=n("VU/8")(I,A,!1,function(e){n("+sI2")},null,null).exports,M={name:"choseUsers",mixins:[S.a],components:{},computed:w()({},Object(L.d)({userByDepts:function(e){return e.contact.userByDepts}})),props:{value:{type:String,default:function(){return""},isSync:!0},disabled:{type:Boolean,default:function(){return!1}},placeholder:{type:String,default:function(){return"请选择部门"}}},data:function(){return{DeptTree:[]}},watch:{sync_value:function(){this.$emit("input",this.sync_value)}},mounted:function(){var e=this;this.disabled||(0==this.userByDepts.length?this.getUserByDeptData().then(function(t){e.DeptTree=e.getdeptList(e.userByDepts),e.DeptTree.unshift({id:"1",label:"全公司"})}):(this.DeptTree=this.getdeptList(this.userByDepts),this.DeptTree.unshift({id:"1",label:"全公司"})))},methods:w()({},Object(L.b)(["getUserByDeptData"]),{copyobject:function(e){return JSON.parse(R()(e))},getdeptList:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=[],s=0;s<e.length;s++){var i=this.copyobject(t),a=e[s];if(a.deptname){var o={label:a.deptname};if(i.push(a.deptname),o.id=a._uuid,n.push(o),a.children){if(!(a.children.length>0))continue;var r=this.getdeptList(a.children,i);r.length>0&&(n=n.concat(r))}}}return n}})},U={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.disabled?n("div",[n("span",{staticClass:"usertag"},[e._v("\n            "+e._s(e.sync_value?e.sync_value:"无")+"\n            ")])]):n("div",[n("el-select",{attrs:{clearable:"",filterable:"",placeholder:e.placeholder},model:{value:e.sync_value,callback:function(t){e.sync_value=t},expression:"sync_value"}},e._l(e.DeptTree,function(e){return n("el-option",{key:e.id,attrs:{label:e.label,value:e.label}})}),1)],1)])},staticRenderFns:[]};var F=n("VU/8")(M,U,!1,function(e){n("0uyp")},null,null).exports,N={name:"choseDeptStrExcludeJtgs",mixins:[S.a],components:{},computed:w()({},Object(L.d)({userByDepts:function(e){return e.contact.userByDepts}})),props:{value:{type:String,default:function(){return""},isSync:!0},disabled:{type:Boolean,default:function(){return!1}},placeholder:{type:String,default:function(){return"请选择部门"}}},data:function(){return{DeptTree:[]}},watch:{sync_value:function(){this.$emit("input",this.sync_value)}},mounted:function(){var e=this;this.disabled||(0==this.userByDepts.length?this.getUserByDeptData().then(function(t){e.DeptTree=e.getdeptList(e.userByDepts),e.DeptTree.unshift({id:"1",label:"全公司"})}):(this.DeptTree=this.getdeptList(this.userByDepts),this.DeptTree.unshift({id:"1",label:"全公司"})))},methods:w()({},Object(L.b)(["getUserByDeptData"]),{copyobject:function(e){return JSON.parse(R()(e))},getdeptList:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=[],s=0;s<e.length;s++){var i=this.copyobject(t),a=e[s];if(a.deptname){i.push(a.deptname);var o={label:i.filter(function(e){return"集团公司"!=e}).join("-")};if(o.id=a._uuid,n.push(o),a.children){if(!(a.children.length>0))continue;var r=this.getdeptList(a.children,i);r.length>0&&(n=n.concat(r))}}}return n}})},$={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.disabled?n("div",[n("span",{staticClass:"usertag"},[e._v("\n            "+e._s(e.sync_value?e.sync_value:"无")+"\n            ")])]):n("div",[n("el-select",{staticStyle:{width:"100%"},attrs:{clearable:"",filterable:"",placeholder:e.placeholder},model:{value:e.sync_value,callback:function(t){e.sync_value=t},expression:"sync_value"}},e._l(e.DeptTree,function(e){return n("el-option",{key:e.id,attrs:{label:e.label,value:e.label}})}),1)],1)])},staticRenderFns:[]};var q=n("VU/8")(N,$,!1,function(e){n("8mpL")},null,null).exports,P={name:"ChoseContact",components:{},mixins:[S.a],props:{value:{type:Array,default:function(){return[]},isSync:!0},disabled:{type:Boolean,default:function(){return!1}},placeholder:{type:String,default:function(){return"请选择通讯录联系人"}}},data:function(){return{DeptTree:[]}},watch:{sync_value:function(){this.$emit("input",this.sync_value)},placeholder:function(){this.placeholder||(this.placeholder="请选择通讯录联系人")}},mounted:function(){this.placeholder||(this.placeholder="请选择通讯录联系人")},methods:{}},H={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[this.disabled?t("div",[t("chose-contact-group-modal",{attrs:{disabled:!0,placeholder:this.placeholder,whitelist:["dept_user","role","conditions"],"dept-with-son":!0,"with-advance-set":!1,"group-list":this.sync_value,"test-type":"spread"}})],1):t("div",[t("chose-contact-group-modal",{attrs:{placeholder:this.placeholder,whitelist:["dept_user","role","conditions"],"dept-with-son":!0,"with-advance-set":!1,"group-list":this.sync_value,"test-type":"spread"}})],1)])},staticRenderFns:[]};var G=n("VU/8")(P,H,!1,function(e){n("yhUs")},null,null).exports,W=n("6LRO"),K={name:"IfTest",mixins:[S.a],components:{},computed:w()({},Object(L.c)(["requireDataList"])),props:{value:{type:String,default:function(){return""},isSync:!0},disabled:{type:Boolean,default:function(){return!1}}},data:function(){return{iffuntabtype:"props",modaltestIfstr:!1,matchbackmsg:null,matchtestarr:[],matchtestifstr:null,funList:[{name:"包含inAarray",desc:'使用说明：#[包含inAarray](多选元素（比如多选框）,字符串)；比如#[包含inAarray](@[多选框组_1559000_689],"台州公司")'},{name:"包含strpos",desc:'使用说明：#[包含strpos](文本内容(比如输入框),字符串)；比如#[包含strpos](@[文本框_1559000_689],"台州公司")'}],operatorList:["==","<",">","/","*","-","+","<=",">=","&&","||","!=","(",")"]}},mounted:function(){},methods:w()({unique:function(e){for(var t=[],n=0;n<e.length;n++)-1==t.indexOf(e[n])&&t.push(e[n]);return t},okTestIfstr:function(){var e=this;Object(W.c)({ifstr:this.matchtestifstr,formdatalist:this.matchtestarr}).then(function(t){var n=t.data;e.matchbackmsg=n.msg,n.success?e.$message.info(n.msg):e.$message.error(n.msg),console.log(n)})},readyTestifstr:function(e){var t=this;if(this.matchbackmsg=null,e){var n=e.match(/@\[.+?\]/g),s=[];n&&(n=this.unique(n)).forEach(function(e){var n=e.match(/\d{13}_\d{1,}/g);n&&t.requireDataList.forEach(function(e){if(n[0]==e.key){var i=t.copyobject(e);i.value=1,t.matchtestarr.forEach(function(e){e.key==i.key&&(i.value=e.value)}),s.push(i)}})}),this.matchtestarr=s,this.matchtestifstr=e,this.modaltestIfstr=!0}else this.$message.error("测试字符串不可为空")},addAt:function(e){var t=this.$refs.nextfunif.$el.getElementsByTagName("textarea")[0];t.focus();var n=t.selectionStart,s=t.selectionEnd,i=n,a=t.value;this.sync_value=a.substring(0,n)+e+a.substring(s,a.length),i+=e.length,setTimeout(function(){t.selectionStart=t.selectionEnd=i},300)}},Object(L.b)(["getUserByDeptData"]),{copyobject:function(e){return JSON.parse(R()(e))},getuserList:function(e){for(var t=[],n=0;n<e.length;n++){var s=e[n];if(s.username){var i={label:s.username+(s.userjobid?"("+s.userjobid+")":"")};i.id=s._uuid,t.push(i)}if(s.children){if(!(s.children.length>0))continue;var a=this.getuserList(s.children);a.length>0&&a.forEach(function(e){t.some(function(t){return t.label==e.label})||t.push(e)})}}return t}})},Y={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-dialog",{attrs:{visible:e.modaltestIfstr,title:"测试表达式","append-to-body":"",width:"50%"},on:{"update:visible":function(t){e.modaltestIfstr=t}}},[n("el-card",{staticClass:"box-card"},[e._v("\n                    测试表达式：\n                    "+e._s(e.matchtestifstr)+"\n                ")]),e._v(" "),e.matchtestarr.length?n("div",[n("el-alert",{staticClass:"mg10",attrs:{closable:!1,title:"请填写如下测试数据",type:"success"}}),e._v(" "),n("el-form",{attrs:{"label-position":"right","label-width":"120px"}},[e._l(e.matchtestarr,function(t){return n("el-form-item",{key:t.key,attrs:{label:t.name}},[n("el-input",{attrs:{placeholder:"输入测试数据",size:"mini"},model:{value:t.value,callback:function(n){e.$set(t,"value",n)},expression:"match.value"}})],1)}),e._v(" "),n("span",{staticClass:"fz12",staticStyle:{color:"red"}},[e._v("*如果测试的数据是多选情况，请用,隔开；比如宁波公司,杭州公司")])],2)],1):n("div",[n("el-alert",{attrs:{closable:!1,title:"此条件表达式不包含任何测试数据，可直接运行测试",type:"warning"}})],1),e._v(" "),e.matchbackmsg?n("el-alert",{staticClass:"mg10",attrs:{title:e.matchbackmsg,closable:!1,type:"error"}}):e._e(),e._v(" "),n("el-alert",{attrs:{title:"计算结果说明"}},[e._v("\n                    1代表是通过，会执行下一个步骤"),n("br"),e._v("\n            0代表是未通过，不会执行下一步骤；"),n("br"),e._v("\n            计算报错：说明表达式不合法；请检查表达式；\n          ")]),e._v(" "),n("div",{attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"primary"},on:{click:e.okTestIfstr}},[e._v("测试")])],1)],1),e._v(" "),n("el-input",{ref:"nextfunif",attrs:{type:"textarea",placeholder:"输入条件表达式"},model:{value:e.sync_value,callback:function(t){e.sync_value=t},expression:"sync_value"}}),e._v(" "),n("div",{staticStyle:{"line-height":"18px","font-size":"12px","margin-top":"2px"}},[n("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.readyTestifstr(e.sync_value)}}},[e._v("测试")]),e._v(" "),n("span",{staticClass:"fz12",staticStyle:{color:"red"}},[e._v('*提示：表单变量不可自行修改「格式:@[表单名_表单标示]」，字符串表示需加”“；注意是英文”；比如\n              @[资产分类_1545714598000_9330]=="购买配送"')]),e._v(" "),n("div",{staticClass:"fz12",staticStyle:{color:"red"}},[e._v('如果是多组判断，请输入()中括号确定优先级,比如(@[变量1]=="是")&&(@[变量2]=="是")')])],1),e._v(" "),n("el-tabs",{model:{value:e.iffuntabtype,callback:function(t){e.iffuntabtype=t},expression:"iffuntabtype"}},[n("el-tab-pane",{attrs:{label:"可选参数",name:"props"}},e._l(e.requireDataList,function(t){return n("el-button",{key:t.key,staticStyle:{"margin-bottom":"5px"},attrs:{size:"small"},on:{click:function(n){return e.addAt("@["+t.name+"_"+t.key+"]")}}},[e._v(e._s(t.name))])}),1),e._v(" "),n("el-tab-pane",{attrs:{label:"可选符号",name:"operator"}},e._l(e.operatorList,function(t,s){return n("el-button",{key:s,staticStyle:{"margin-bottom":"5px"},attrs:{size:"small"},on:{click:function(n){return e.addAt(""+t)}}},[e._v(e._s(t))])}),1),e._v(" "),n("el-tab-pane",{attrs:{label:"可选函数",name:"fun"}},e._l(e.funList,function(t,s){return n("el-tooltip",{key:s,attrs:{content:t.desc,placement:"top",effect:"light"}},[n("el-button",{staticStyle:{"margin-bottom":"5px"},attrs:{size:"small"},on:{click:function(n){e.addAt("#["+t.name+"]()")}}},[e._v(e._s(t.name))])],1)}),1)],1)],1)},staticRenderFns:[]};var J=n("VU/8")(K,Y,!1,function(e){n("02s5")},null,null).exports,X={name:"ChoseShowItem",components:{Treeselect:T.a,IfTest:J},props:{deptWithSon:Boolean,chose:{type:Object,required:!0,default:function(){return{}}},index:{type:Number}},computed:w()({},Object(L.d)({userByDepts:function(e){return e.contact.userByDepts},RoleTrees:function(e){return e.contact.RoleTrees}})),data:function(){return{CoveragePlaceholder:"",ModalIfFormVisible:!1,nowIfForm:null,modal1:!1,visible2:!1,visible3:!1,rolelist:[],DeptTree:[],testDepts:[],formif:{name:null,data:{ifstr:null,to:[]}}}},mounted:function(){this.deptWithSon?this.CoveragePlaceholder="默认不论层级":this.CoveragePlaceholder="默认第一级",this.init()},methods:w()({},Object(L.b)(["getUserByDeptData","GetRoleTree"]),{init:function(){var e=this;0==this.RoleTrees.length?this.GetRoleTree().then(function(t){setTimeout(function(){e.getRoleList()},300)}):this.getRoleList(),0==this.userByDepts.length?this.getUserByDeptData().then(function(t){e.DeptTree=e.getdeptList(e.userByDepts),e.DeptTree.unshift({id:"1",label:"全公司"})}):(this.DeptTree=this.getdeptList(this.userByDepts),this.DeptTree.unshift({id:"1",label:"全公司"})),console.log("this.DeptTree"),console.log(this.DeptTree)},getRoleList:function(){console.log("RoleTrees改变了"),console.log(this.RoleTrees);for(var e=[],t=0;t<this.RoleTrees.length;t++){var n=this.RoleTrees[t],s=[];if(n.children)for(var i=0;i<n.children.length;i++){var a=n.children[i];s.push({id:a._uuid,label:a.rolename})}e.push({id:n._uuid,label:n.groupname,children:s})}console.log(e),this.rolelist=e,console.log(this.rolelist)},ok:function(){this.$Message.info("Clicked ok")},cancel:function(){this.$Message.info("Clicked cancel")},copyobject:function(e){return JSON.parse(R()(e))},saveIfForm:function(){this.ModalIfFormVisible=!1,this.nowIfForm.name=this.formif.name,this.nowIfForm.data=this.copyobject(this.formif.data)},editIfForm:function(e){this.nowIfForm=e,this.ModalIfFormVisible=!0,this.formif={name:e.name,data:{ifstr:e.data&&e.data.ifstr?e.data.ifstr:null,to:e.data&&e.data.to?this.copyobject(e.data.to):[]}}},getdeptList:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=[],s=0;s<e.length;s++){var i=this.copyobject(t),a=e[s];if(a.deptname){var o={label:(i.join("-")?i.join("-")+"-":"")+a.deptname};if(i.push(a.deptname),o.id=a._uuid,n.push(o),a.children){if(!(a.children.length>0))continue;var r=this.getdeptList(a.children,i);r.length>0&&(n=n.concat(r))}}}return n}})},Z={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.ModalIfFormVisible?n("el-dialog",{attrs:{"append-to-body":"",title:"编辑表单条件",visible:e.ModalIfFormVisible,width:"50%"},on:{"update:visible":function(t){e.ModalIfFormVisible=t}}},[n("el-form",{attrs:{"label-width":"80px"}},[n("el-form-item",{attrs:{label:"条件名称"}},[n("el-input",{model:{value:e.formif.name,callback:function(t){e.$set(e.formif,"name",t)},expression:"formif.name"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"条件判断"}},[n("if-test",{model:{value:e.formif.data.ifstr,callback:function(t){e.$set(e.formif.data,"ifstr",t)},expression:"formif.data.ifstr"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"指定给"}},[n("chose-contact-group-modal",{attrs:{"can-test":!1,blacklist:["formif"],"test-type":"spread","dept-with-son":!1,"with-advance-set":!1,"group-list":e.formif.data.to}}),e._v(" "),n("el-alert",{attrs:{title:"此处选人与全局设置无关",closable:!1,type:"warning"}})],1)],1),e._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.ModalIfFormVisible=!1}}},[e._v("取 消")]),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:e.saveIfForm}},[e._v("确 定")])],1)],1):e._e(),e._v("\n    "+e._s(e.index+1)+"\n    "),"role"==e.chose.type?n("span",[e._v("[角色]")]):e._e(),e._v(" "),"user"==e.chose.type?n("span",[e._v("[个人]")]):e._e(),e._v(" "),"dept"==e.chose.type?n("span",[e._v("[部门]\n       "),n("el-popover",{attrs:{placement:"top",width:"350"},model:{value:e.visible3,callback:function(t){e.visible3=t},expression:"visible3"}},[e.visible3?n("el-form",{attrs:{"label-width":"80px"}},[n("h3",[e._v("设置部门范围")]),e._v(" "),n("el-form-item",{attrs:{label:"覆盖范围"}},[n("el-select",{attrs:{placeholder:e.CoveragePlaceholder},model:{value:e.chose.data.coverage,callback:function(t){e.$set(e.chose.data,"coverage",t)},expression:"chose.data.coverage"}},[n("el-option",{attrs:{label:"包含第1级",value:"1"}}),e._v(" "),n("el-option",{attrs:{label:"包含第2级",value:"2"}}),e._v(" "),n("el-option",{attrs:{label:"包含第3级",value:"3"}}),e._v(" "),n("el-option",{attrs:{label:"包含第4级",value:"4"}}),e._v(" "),n("el-option",{attrs:{label:"包含第5级",value:"5"}}),e._v(" "),n("el-option",{attrs:{label:"全包含不论层级",value:"n"}})],1)],1),e._v(" "),n("el-alert",{staticClass:"mg-t5",attrs:{title:"什么是覆盖范围？比如A部门下有a,b,c三个员工和一个B部门(有员工d,f)；那么选择第一级就是a\\b\\c三个员工;包含第二级选到就是a\\b\\c\\d\\f 5个员工",closable:!1,type:"error"}})],1):e._e(),e._v(" "),n("i",{staticClass:"el-icon-setting setting",attrs:{slot:"reference"},slot:"reference"})],1)],1):e._e(),e._v(" "),"form"==e.chose.type?n("span",[e._v("[表单]")]):e._e(),e._v(" "),"formif"==e.chose.type?n("span",[e._v("[表单条件]\n    "),n("i",{staticClass:"el-icon-setting setting",on:{click:function(t){return e.editIfForm(e.chose)}}})]):e._e(),e._v(" "),"fun"==e.chose.type?n("span",[e._v("[条件]\n              "),"Super"==e.chose.id||"SuperByLastUser=role"==e.chose.id||"SuperByLastUser=dept"==e.chose.id?n("el-popover",{attrs:{placement:"top",width:"350"},model:{value:e.visible2,callback:function(t){e.visible2=t},expression:"visible2"}},[e.visible2?n("el-form",{attrs:{"label-width":"80px"}},[n("h3",[e._v("设置<上级管理员>")]),e._v(" "),"Super"==e.chose.id?n("el-form-item",{attrs:{label:"判断依据"}},[n("el-select",{attrs:{placeholder:"请选择"},model:{value:e.chose.data.chosetype,callback:function(t){e.$set(e.chose.data,"chosetype",t)},expression:"chose.data.chosetype"}},[n("el-option",{attrs:{label:"流程创建者",value:"creater"}}),e._v(" "),n("el-option",{attrs:{label:"按上一节点提交者",value:"lastuser"}})],1)],1):e._e(),e._v(" "),"Super"==e.chose.id?n("el-form-item",{attrs:{label:"查找方式"}},[n("el-select",{attrs:{placeholder:"请选择查找方式"},model:{value:e.chose.data.findtype,callback:function(t){e.$set(e.chose.data,"findtype",t)},expression:"chose.data.findtype"}},[n("el-option",{attrs:{label:"直接上级",value:"direct"}}),e._v(" "),n("el-option",{attrs:{label:"向上逐级查找主管直到找到",value:"tree"}})],1)],1):e._e(),e._v(" "),"Super"==e.chose.id||"SuperByLastUser=role"==e.chose.id?n("el-form-item",{attrs:{label:"满足角色"}},[n("treeselect",{attrs:{options:e.rolelist,multiple:"","disable-branch-nodes":!0,"show-count":!0,placeholder:"可选择角色"},model:{value:e.chose.data.roles,callback:function(t){e.$set(e.chose.data,"roles",t)},expression:"chose.data.roles"}})],1):e._e(),e._v(" "),"Super"==e.chose.id||"SuperByLastUser=dept"==e.chose.id?n("el-form-item",{attrs:{label:"满足部门"}},[n("el-select",{staticStyle:{width:"100%"},attrs:{multiple:"",placeholder:"可选择部门"},model:{value:e.chose.data.depts,callback:function(t){e.$set(e.chose.data,"depts",t)},expression:"chose.data.depts"}},e._l(e.DeptTree,function(e){return n("el-option",{key:e.id,attrs:{label:e.label,value:e.id}})}),1),e._v(" "),n("span",{staticClass:"fz12",staticStyle:{color:"red"}},[e._v("\n               *如果选择多个部门，只要有一个部门满足条件即可\n           ")])],1):e._e()],1):e._e(),e._v(" "),n("i",{staticClass:"el-icon-setting setting",attrs:{slot:"reference"},slot:"reference"})],1):e._e()],1):e._e(),e._v("\n    "+e._s(e.chose.name)+"\n        "),"dept"==e.chose.type?n("sup",{staticClass:"fz12",staticStyle:{color:"#FF5722"}},[e._v("\n            ("+e._s(e.chose.data.coverage?e.chose.data.coverage:e.deptWithSon?"n":"1")+")\n        ")]):e._e()],1)},staticRenderFns:[]};var Q={name:"ChoseContact",components:{ChoseShowItem:n("VU/8")(X,Z,!1,function(e){n("QTNz")},"data-v-08000112",null).exports},props:{whitelist:{type:Array,default:function(){return["dept_user","role","conditions","form","formif"]}},blacklist:{type:Array,default:function(){return[]}},deptWithSon:{type:Boolean,default:function(){return!0}},chosed:{type:Array,default:function(){return[]}},ShowFunChose:{type:Boolean,default:function(){return!0}},withGroupChose:{type:Boolean,default:function(){return!1}}},data:function(){return{showItem:[],rolefilterText:"",searchkey:"",tabname:"dept_user",rolelist:[],nowshowlist:[],navlist:[],modal1:!1,funs:[{n:"创建者自己",v:"CreatID",t:"本流程的创建者"},{n:"上一审核人",v:"LastUserID",t:"上一流程节点的审核人"},{n:"创建者的直接上级",v:"directSuperByCreat",t:"创建者的直接上级主管"},{n:"创建者上级管理员",v:"SupersByCreat",t:"创建者的上级主管，如果上一级没有主管，会沿着部门树上找主管。直到找到"},{n:"上一审核人的直接上级",v:"directSuperByLastUser",t:"上一个审核人的直接上级主管"},{n:"上一审核人上级管理员",v:"SuperByLastUser",t:"上一个审核人的上级主管，如果上一级没有主管，会沿着部门树上找主管。直到找到"},{n:"上一审核人上级管理员而且角色=",v:"SuperByLastUser=role",t:"上一个审核人的上级主管中而且角色您选择的角色，如果上一级没有查询到，会沿着部门树上找主管。直到找到"},{n:"上一审核人上级管理员而且部门=",v:"SuperByLastUser=dept",t:"上一个审核人的上级主管中而且部门您选择的部门，如果上一级没有查询到，会沿着部门树上找主管。直到找到"},{n:"上级管理员",v:"Super",t:"上级管理员，可以根据条件配置"}],funlist:[],role_checked_keys:[]}},watch:{rolefilterText:function(e){this.$refs.roletree.filter(e)},RoleTrees:function(){this.getRoleList()},userByDepts:function(){this.getnowUserdeptList()}},mounted:function(){var e=this;this.chosed.forEach(function(t,n){console.log(n),"dept"==t.type&&(t.data||e.$set(e.chosed[n],"data",{coverage:null}),e.deptWithSon||"1"==t.id&&(t.data&&t.data.coverage||e.$set(e.chosed[n],"data",{coverage:"n"})))}),this.showItem=[],console.log("this.whitelist",this.whitelist),console.log("this.blacklist",this.blacklist);for(var t=0;t<this.whitelist.length;t++){for(var n=this.whitelist[t],s=!1,i=0;i<this.blacklist.length;i++)if(this.blacklist[i]==n){s=!0;break}s||this.showItem.push(n)}console.log("showItem",this.showItem),console.log("requireDataList",this.requireDataList),console.log("this.userByDepts2"),console.log(this.userByDepts),0==this.userByDepts.length?this.getUserByDeptData().then(function(t){e.getnowUserdeptList()}):this.getnowUserdeptList(),0==this.RoleTrees.length?this.GetRoleTree().then(function(t){setTimeout(function(){e.getRoleList()},300)}):this.getRoleList(),this.getFunList()},computed:w()({},Object(L.d)({userByDepts:function(e){return e.contact.userByDepts},RoleTrees:function(e){return e.contact.RoleTrees}}),Object(L.c)(["requireDataList"])),methods:w()({},Object(L.b)(["GetRoleTree","getUserByDeptData"]),{filterNode:function(e,t){return!e||-1!==t.label.indexOf(e)},tabshow:function(e){return this.showItem.some(function(t){return t==e})},canformList:function(e){var t=[];return e.forEach(function(e){-1!=["chose-depts","chose-users","chose-contact"].indexOf(e.type)&&t.push(e)}),t},addformif:function(e){var t=this;this.$prompt("请输入条件简称","提示",{confirmButtonText:"确定",cancelButtonText:"取消",inputErrorMessage:"条件名称不可为空",inputPlaceholder:"输入条件简称，比如 表单项目是xx 跳到xx",inputValidator:function(e){return!!e}}).then(function(e){var n=e.value;t.chosed.push({type:"formif",id:Date.parse(new Date)/1e3+""+Math.ceil(99999*Math.random()),name:n,data:null})}).catch(function(){})},addform:function(e){this.chosed.push({type:"form",id:e.key,name:e.name,data:e.type})},addfun:function(e){var t={};"Super"==e.id&&(t={chosetype:"creater",findtype:"tree",roles:[],depts:[]}),"SuperByLastUser=role"==e.id&&(t={roles:[]}),"SuperByLastUser=dept"==e.id&&(t={depts:[]}),this.chosed.push({type:"fun",id:e.id,name:e.label,data:t})},addtogroup:function(){this.$emit("on-addgroup-click",{chosed:this.chosed}),this.chosed=[],this.whenChosedChange()},change_role_tree:function(e){this.change_tree(this.$refs.roletree.getCheckedNodes(),"role")},change_fun_tree:function(e){this.change_tree(this.$refs.conditionstree.getCheckedNodes(),"fun")},change_tree:function(e,t){console.log(e);for(var n=0;n<e.length;n++){var s=e[n];if(!s.children){for(var i=!1,a=0;a<this.chosed.length;a++){var o=this.chosed[a];if(o.type==t&&s.id==o.id){i=!0;break}}i||this.chosed.push({type:t,id:s.id,name:s.label})}}console.log(this.chosed);for(var r=this.chosed.length-1;r>=0;r--){var l=this.chosed[r];if(l.type==t){for(var c=!1,u=0;u<e.length;u++){var d=e[u];if(!d.children&&d.id==l.id){c=!0;break}}c||this.chosed.splice(r,1)}}},change_nowshow:function(e){console.log(e),e.checked?this.addtochecked(e.type,e.id,e.name):this.deletetochecked(e.type,e.id,e.name)},addtochecked:function(e,t,n){for(var s=!1,i=0;i<this.chosed.length;i++){var a=this.chosed[i];if(a.type==e&&a.id==t){s=!0;break}}if(!s){var o={type:e,id:t,name:n,data:null};"dept"==e&&(o.data={coverage:null},"1"==t&&(o.data={coverage:"n"})),this.chosed.push(o)}},deletetochecked:function(e,t){for(var n=0;n<this.chosed.length;n++){var s=this.chosed[n];if(s.type==e&&s.id==t){this.chosed.splice(n,1);break}}},deletechosed:function(e){this.chosed.splice(e,1),this.whenChosedChange()},whenChosedChange:function(){console.log("whenChosedChange"),this.nowshowlist=this.before_nowshowlist(this.nowshowlist),this.getRoleList(),this.getFunList()},searchname:function(){if(this.tabname="dept_user",this.searchkey){var e=this.find_f_bysearch(this.searchkey,this.userByDepts),t=this.unique_group_by_key(e,"id");this.nowshowlist=this.before_nowshowlist(t.unique)}},checkhasinChosed:function(e,t){for(var n=0;n<this.chosed.length;n++){var s=this.chosed[n];if(s.type==t){if("role"==t&&e._uuid==s.id)return!0;if("fun"==t&&e.v==s.id)return!0}}return!1},before_nowshowlist:function(e){console.log("this.chosed",this.chosed);for(var t=0;t<e.length;t++){var n=e[t];n.checked=!1;for(var s=0;s<this.chosed.length;s++){var i=this.chosed[s];n.type==i.type&&n.id==i.id&&(n.checked=!0)}}return e},unique_group_by_key:function(e,t){for(var n={},s=[],i=0;i<e.length;i++)n[e[i][t]]?n[e[i][t]].push(e[i]):(n[e[i][t]]=[e[i]],s.push(e[i]));return{unique:s,group:n}},find_f_bysearch:function(e,t){for(var n=[],s=0;s<t.length;s++){var i=t[s];i.deptname&&-1!=i.deptname.indexOf(e)&&n.push({type:"dept",name:i.deptname,id:i._uuid,checked:!1}),i.username&&-1!=i.username.indexOf(e)&&n.push({type:"user",name:i.username,id:i._uuid,checked:!1}),i.children&&(n=n.concat(this.find_f_bysearch(e,i.children)))}return n},toChildren:function(e){this.navlist.push({id:e.id,name:e.name}),console.log("this.navlist"),console.log(this.navlist),this.getnowUserdeptList()},navclick:function(e){this.navlist.length!=e&&this.navlist.splice(e,this.navlist.length-e),this.getnowUserdeptList()},find_f_inlist:function(e,t){if("1"==t)return e;for(var n=0;n<e.length;n++){var s=e[n];if(console.log(s._uuid+"="+t),t==s._uuid)return s.children}for(var i=0;i<e.length;i++){var a=e[i];if(a.children&&a.children.length>0){var o=this.find_f_inlist(a.children,t);if(o.length>0)return o}}return[]},getnowUserdeptList:function(){var e=[];0==this.navlist.length?(console.log("this.userByDepts"),console.log(this.userByDepts),e=[{children:this.userByDepts,deptname:"全公司",parent_id:0,_uuid:"1"}]):(console.log("this.navlist[this.navlist.length - 1].id"),console.log(this.navlist[this.navlist.length-1].id),e=this.find_f_inlist(this.userByDepts,this.navlist[this.navlist.length-1].id),console.log("children",e));for(var t=[],n=0;n<e.length;n++){var s=e[n];s.deptname&&t.push({type:"dept",name:s.deptname,children:s.children,id:s._uuid,checked:!1}),s.username&&t.push({type:"user",name:s.username,id:s._uuid,checked:!1})}this.nowshowlist=this.before_nowshowlist(t)},getFunList:function(){var e=this,t=[];this.funs.forEach(function(n){t.push({id:n.v,label:n.n,tip:n.t,checked:e.checkhasinChosed(n,"fun")})}),this.funlist=t},getRoleList:function(){console.log("RoleTrees改变了"),console.log(this.RoleTrees),this.role_checked_keys=[];for(var e=[],t=0;t<this.RoleTrees.length;t++){var n=this.RoleTrees[t],s=[];if(n.children)for(var i=0;i<n.children.length;i++){var a=n.children[i],o={id:a._uuid,label:a.rolename,checked:this.checkhasinChosed(a,"role")};s.push(o),o.checked&&this.role_checked_keys.push(a._uuid)}e.push({id:n._uuid,label:n.groupname,children:s,disableCheckbox:!0,expand:!0,disabled:!0})}console.log("rolelist",e),this.rolelist=e}})},ee={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"chose-contact",staticStyle:{height:"300px"}},[n("div",{staticClass:"left",staticStyle:{"border-right":"1px dashed #d4d4d4"}},[e._v("\n     选择：\n     "),n("div",[n("el-tabs",{model:{value:e.tabname,callback:function(t){e.tabname=t},expression:"tabname"}},[e.tabshow("dept_user")?n("el-tab-pane",{staticClass:"dept_user",attrs:{label:"组织架构",name:"dept_user"}},[n("el-input",{attrs:{clearable:"",placeholder:"输入人员名称或部门名称"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchname(t)}},model:{value:e.searchkey,callback:function(t){e.searchkey=t},expression:"searchkey"}}),e._v(" "),n("div",{staticClass:"treelist"},[n("div",{staticStyle:{margin:"5px"}},[e._v("\n               导航："),n("a",{on:{click:function(t){return e.navclick(0)}}},[e._v("/")]),e._v(" "),e._l(e.navlist,function(t,s){return n("span",{key:t.id},[e._v("\n                 ->\n                 "),n("a",{on:{click:function(t){return e.navclick(s+1)}}},[e._v("\n                   "+e._s(t.name)+"\n                 ")])])})],2),e._v(" "),n("ul",{staticClass:"nowshowlist"},[0==e.nowshowlist.length?n("li",[e._v("没有任何信息哦")]):e._e(),e._v(" "),e._l(e.nowshowlist,function(t){return n("li",{key:t.id},["user"==t.type?n("div",[n("el-checkbox",{on:{change:function(n){return e.change_nowshow(t)}},model:{value:t.checked,callback:function(n){e.$set(t,"checked",n)},expression:"item.checked"}},[n("v-icon",{attrs:{name:"person"}}),e._v("\n                     "+e._s(t.name)+"\n                   ")],1)],1):e._e(),e._v(" "),"dept"==t.type?n("div",{staticStyle:{cursor:"pointer"}},[n("el-checkbox",{on:{change:function(n){return e.change_nowshow(t)}},model:{value:t.checked,callback:function(n){e.$set(t,"checked",n)},expression:"item.checked"}}),e._v(" "),n("span",{on:{click:function(n){return e.toChildren(t)}}},[n("v-icon",{attrs:{name:"ios-folder-open"}}),e._v("\n                     "+e._s(t.name)+"\n                     "),n("v-icon",{staticStyle:{float:"right"},attrs:{name:"ios-arrow-dropright"}})],1)],1):e._e()])})],2)])],1):e._e(),e._v(" "),e.tabshow("role")?n("el-tab-pane",{attrs:{label:"角色",name:"role"}},[n("el-input",{staticStyle:{"margin-bottom":"10px"},attrs:{placeholder:"输入角色名称",clearable:""},model:{value:e.rolefilterText,callback:function(t){e.rolefilterText=t},expression:"rolefilterText"}}),e._v(" "),n("div",{staticClass:"treelist"},[n("el-tree",{ref:"roletree",attrs:{"filter-node-method":e.filterNode,data:e.rolelist,"default-checked-keys":e.role_checked_keys,"node-key":"id","default-expand-all":"","show-checkbox":""},on:{check:e.change_role_tree}})],1)],1):e._e(),e._v(" "),e.tabshow("conditions")&&e.withGroupChose&&e.ShowFunChose?n("el-tab-pane",{attrs:{label:"附加条件",name:"conditions"}},[n("div",{staticClass:"treelist",staticStyle:{"line-height":"24px"}},[e._l(e.funlist,function(t,s){return n("div",{key:s,staticClass:"fz13"},[n("i",{staticClass:"el-icon-circle-plus-outline pointer",on:{click:function(n){return e.addfun(t)}}}),e._v(" "),n("el-tooltip",{attrs:{content:t.tip,effect:"light",placement:"top-start"}},[n("span",[e._v(e._s(t.label)+" ")])])],1)}),e._v(" "),n("span",{staticClass:"fz12",staticStyle:{color:"red"}},[e._v("*后期根据使用需求加其他条件")])],2)]):e._e(),e._v(" "),e.tabshow("form")?n("el-tab-pane",{attrs:{label:"表单控件",name:"form"}},[n("div",{staticClass:"treelist"},[0==e.canformList(e.requireDataList).length?n("div",{staticStyle:{"font-size":"12px"}},[e._v("未添加相关的人员/部门/角色选择表单")]):e._e(),e._v(" "),e._l(e.canformList(e.requireDataList),function(t,s){return n("div",{key:s},[n("div",{staticClass:"fz12"},[n("i",{staticClass:"el-icon-circle-plus-outline pointer",on:{click:function(n){return e.addform(t)}}}),e._v(" "),n("span",[e._v(e._s(t.name)+" ")])])])})],2)]):e._e(),e._v(" "),e.tabshow("formif")?n("el-tab-pane",{attrs:{label:"表单条件控件",name:"formif"}},[n("div",{staticClass:"treelist"},[n("el-button",{attrs:{size:"mini",type:"primary",icon:"el-icon-plus"},on:{click:e.addformif}},[e._v("添加条件")])],1)]):e._e()],1)],1)]),e._v(" "),n("div",{staticClass:"right"},[e._v("\n     已选：\n     "),e._v(" "),n("ul",{staticClass:"chosedlist"},[0==e.chosed.length?n("li",[e._v("未选择任何对象")]):e._e(),e._v(" "),e._l(e.chosed,function(t,s){return n("li",{key:s},[n("chose-show-item",{attrs:{"dept-with-son":e.deptWithSon,index:s,chose:t}}),e._v(" "),n("v-icon",{staticStyle:{cursor:"pointer",position:"absolute",right:"4px",top:"3px"},attrs:{name:"iostrashoutline"},on:{click:function(t){return e.deletechosed(s)}}})],1)})],2)]),e._v(" "),n("div",{staticClass:"clear"})])},staticRenderFns:[]};var te=n("VU/8")(Q,ee,!1,function(e){n("Arqy"),n("/YWQ")},"data-v-045693a2",null).exports,ne={name:"Divider",props:{title:{type:String,default:function(){return""}}}},se={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"ivu-divider ivu-divider-horizontal ivu-divider-with-text-center"},[t("span",{staticClass:"ivu-divider-inner-text"},[this._v("\n    "+this._s(this.title)+"\n  ")])])},staticRenderFns:[]};var ie=n("VU/8")(ne,se,!1,function(e){n("wMeh")},null,null).exports,ae=n("8qP0"),oe={name:"ChoseContactGroupModal",components:{ChoseContact:te,Treeselect:T.a,Divider:ie},props:{disabled:{type:Boolean,default:function(){return!1}},placeholder:{type:String,default:function(){return"当前未选中联系人条件，点击创建"}},blacklist:{},whitelist:{},canTest:{type:Boolean,default:function(){return!0}},deptWithSon:{type:Boolean,default:function(){return!0}},testType:{type:String,default:function(){return"spread"}},withAdvanceSet:{type:Boolean,default:function(){return!1}},groupList:{type:Array,default:function(){return[]}}},computed:w()({},Object(L.d)({userByDepts:function(e){return e.contact.userByDepts},flowset:function(e){return e.flowdesign.set}}),Object(L.c)(["requireDataList"])),data:function(){return{sensiorset:!1,modal1:!1,modaltest:!1,modaltestonlyspread:!1,chosed:[],chosetype:"or",nowchoseindex:null,edittype:"",testData:null,testformList:[],testformifList:[],testResult:null,testloading:!1,DeptTree:[],singleDeptTree:[],multipleDeptTree:[],LEAF_PRIORITY:"LEAF_PRIORITY",BRANCH_PRIORITY:"BRANCH_PRIORITY",runRoots:[],runRoottype:null,showfun:!0,options:[{label:"a",children:[{id:"aa",label:"aa"},{id:"ab",label:"ab"}]},{id:"b",label:"b"},{id:"c",label:"c"}]}},methods:w()({},Object(L.b)(["getUserByDeptData"]),{advanceSet:function(){this.sensiorset=!this.sensiorset},unique:function(e){for(var t=[],n=0;n<e.length;n++)-1==t.indexOf(e[n])&&t.push(e[n]);return t},readyTestifstr:function(e){var t=this;if(e){var n=e.match(/@\[.+?\]/g);n&&(n=this.unique(n)).forEach(function(e){var n=e.match(/\d{13}_\d{1,}/g);n&&t.requireDataList.forEach(function(e){n[0]==e.key&&(t.testformifList.some(function(t){return t.key==e.key})||t.testformifList.push(e))})})}},testcontactModal:function(){var e=this;if("onlyspread"==this.testType)return this.modaltestonlyspread=!0,this.testloading=!0,void Object(ae.a)({groupList:this.groupList,testType:this.testType}).then(function(t){var n=t.data;e.testloading=!1,e.testResult={persons:n.data}});console.log("this.userByDepts"),console.log(this.userByDepts),0==this.userByDepts.length?this.getUserByDeptData().then(function(t){e.singleDeptTree=e.getnowUserdeptList(e.userByDepts,"single"),e.multipleDeptTree=e.getnowUserdeptList(e.userByDepts,"multiple")}):(this.singleDeptTree=this.getnowUserdeptList(this.userByDepts,"single"),this.multipleDeptTree=this.getnowUserdeptList(this.userByDepts,"multiple")),this.modaltest=!0,this.testResult=null;var t=R()(this.groupList);if("permission"==this.testType&&(this.testData={},this.testData.permission_id={data:[]},console.log(this.testData)),"spread"==this.testType){var n=this.flowset.runRoottype?this.flowset.runRoottype:"creater",s=!1,i=!1;this.testData={formdata:{}},this.testformifList=[],this.testformList=[],this.groupList.forEach(function(t){t.chosed.forEach(function(t){"form"==t.type&&e.testformList.push({key:t.id,componentName:t.data,name:t.name}),"formif"==t.type&&(console.log("ele.data.ifstr",t.data.ifstr),e.readyTestifstr(t.data.ifstr))}),"creater"==t.runRoottype&&(s=!0),"lastuser"==t.runRoottype&&(i=!0),t.runRoottype||("creater"==n&&(s=!0),"lastuser"==n&&(i=!0))}),s&&(this.testData.created_id={data:null}),i&&(this.testData.lastuser_id={data:null}),-1==t.indexOf("ByCreat")&&-1==t.indexOf('"Super"')||(this.testData.created_id={data:null}),-1==t.indexOf("ByLastUser")&&-1==t.indexOf('"Super"')||(this.testData.lastuser_id={data:null})}},RootTypeHasCreater:function(){this.flowset.runRoottype&&this.flowset.runRoottype},RootTypeHasLastUser:function(){},testcontact:function(){},addtogroup:function(){this.disabled?this.$message.info("只读模式,无法选人"):(this.modal1=!0,this.chosed=[],this.runRoots=[],this.runRoottype=null,this.chosetype="or",this.edittype="add",this.initmodal1())},copyobject:function(e){return JSON.parse(R()(e))},handerGroupAdd:function(e){console.log(e)},oktest:function(){var e=this;this.testloading=!0,Object(ae.a)({flowset:this.flowset,groupList:this.groupList,testType:this.testType,testData:this.filterPostTestData(this.testData),deptWithSon:this.deptWithSon}).then(function(t){var n=t.data;e.testloading=!1,e.testResult={persons:n.data}})},filterPostTestData:function(e){var t={};for(var n in e)t[n]=e[n],void 0!==e[n].data&&(t[n]=e[n].data);return t},canceltest:function(){this.modaltest=!1},ok:function(){console.log(this.edittype),console.log(this.nowchoseindex),0!=this.chosed.length?("edit"==this.edittype&&(this.groupList[this.nowchoseindex]={chosetype:this.chosetype,chosed:this.copyobject(this.chosed),runRoots:this.copyobject(this.runRoots),runRoottype:this.runRoottype,runRoot:""}),"add"==this.edittype&&this.groupList.push({chosetype:this.chosetype,chosed:this.copyobject(this.chosed),runRoots:this.copyobject(this.runRoots),runRoottype:this.runRoottype,runRoot:""}),this.modal1=!1,this.reloadGroupName()):this.$message.warning("联系人为空，无法编辑创建")},reloadGroupName:function(){var e=this;this.groupList.forEach(function(t){var n=[];t.chosed.forEach(function(t){"role"==t.type&&n.push("[角色]"+t.name),"user"==t.type&&n.push("[个人]"+t.name),"dept"==t.type&&n.push("[部门]"+t.name+"("+(t.data&&t.data.coverage?t.data.coverage:e.deptWithSon?"n":"1")+")"),"form"==t.type&&n.push("[表单]"+t.name),"formif"==t.type&&n.push("[表单条件]"+t.name),"fun"==t.type&&n.push("[条件]"+t.name)});var s=n.join(" | ");"and"==t.chosetype&&(s+="【取交集】"),"or"==t.chosetype&&(s+="【取并集】"),t.name=s})},cancel:function(){this.$message.info("Clicked cancel"),this.modal1=!1},EditGroup:function(e,t){this.nowchoseindex=t,this.modal1=!0,this.chosed=this.copyobject(e.chosed),this.runRoots=this.copyobject(e.runRoots),this.runRoottype=e.runRoottype,this.chosetype=e.chosetype,this.edittype="edit",this.initmodal1()},removeGroup:function(e,t){e.splice(t,1),this.reloadGroupName()},intend:function(e){for(var t="",n=0;n<e;n++)t+="---";return""==t?"":"+"+t},getdeptList:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=[],s=0;s<e.length;s++){var i=this.copyobject(t),a=e[s];if(a.deptname){var o={label:(i.join("-")?i.join("-")+"-":"")+a.deptname};if(i.push(a.deptname),o.id=a._uuid,n.push(o),a.children){if(!(a.children.length>0))continue;var r=this.getdeptList(a.children,i);r.length>0&&(n=n.concat(r))}}}return console.log("arr",n),n},getnowUserdeptList:function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"1",s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",i=[],a=0;a<e.length;a++){var o=e[a];if(o.deptname){var r={label:o.deptname};if(r.id="multiple"==t?o._uuid:null,o.children){if(!(o.children.length>0))continue;r.children=this.getnowUserdeptList(o.children,t,o._uuid,o.deptname)}i.push(r)}o.username&&i.push({id:n+"__"+o._uuid,label:(s?"<"+s+">":"")+o.username})}return i},initmodal1:function(){var e=this;this.runRoots.length>0||this.runRoottype?this.sensiorset=!0:this.sensiorset=!1,0==this.userByDepts.length?this.getUserByDeptData().then(function(t){e.DeptTree=e.getdeptList(e.userByDepts),e.DeptTree.unshift({id:"1",label:"全公司"})}):(this.DeptTree=this.getdeptList(this.userByDepts),this.DeptTree.unshift({id:"1",label:"全公司"}))}}),mounted:function(){this.showfun="permission"!=this.testType}},re={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"chose-contact-modal"},[n("span",[0==e.groupList.length?n("a",{staticClass:"addtogroup",on:{click:e.addtogroup}},[e._v(e._s(e.placeholder))]):e._e(),e._v(" "),n("ul",{staticClass:"group"},e._l(e.groupList,function(t,s){return n("li",{key:s},[e._l(t.chosed,function(s,i){return n("span",{key:i},["role"==s.type?n("span",[e._v("[角色]"+e._s(s.name))]):e._e(),e._v(" "),"user"==s.type?n("span",[e._v("[个人]"+e._s(s.name))]):e._e(),e._v(" "),"dept"==s.type?n("span",[e._v("[部门]"+e._s(s.name)+"\n\n            "),n("sup",{staticClass:"fz12",staticStyle:{color:"#FF5722"}},[e._v("\n              ("+e._s(s.data&&s.data.coverage?s.data.coverage:e.deptWithSon?"n":"1")+")\n            ")])]):e._e(),e._v(" "),"form"==s.type?n("span",[e._v("[表单]"+e._s(s.name))]):e._e(),e._v(" "),"formif"==s.type?n("span",[e._v("[表单条件]"+e._s(s.name))]):e._e(),e._v(" "),"fun"==s.type?n("span",[e._v("[条件]"+e._s(s.name))]):e._e(),e._v(" "),i+1!=t.chosed.length?n("span",{staticStyle:{padding:"0 5px"}},[e._v("\n            |\n          ")]):e._e()])}),e._v(" "),"and"==t.chosetype?n("el-tooltip",{attrs:{content:"只取交叉部分的人员",placement:"top"}},[n("span",{staticClass:"chosetype"},[e._v("取交集")])]):e._e(),e._v(" "),"or"==t.chosetype?n("el-tooltip",{attrs:{content:"取到所有的人",placement:"top"}},[n("span",{staticClass:"chosetype"},[e._v("取并集")])]):e._e(),e._v(" "),e.disabled?e._e():n("div",{staticClass:"opt_btn_group"},[n("a",{on:{click:function(n){return e.EditGroup(t,s)}}},[e._v("编辑")]),e._v("\n          |\n          "),n("a",{on:{click:function(t){return e.removeGroup(e.groupList,s)}}},[e._v("删除")])]),e._v(" "),s+1!=e.groupList.length?n("Divider",{attrs:{title:"Or"}}):e._e()],2)}),0),e._v(" "),e.groupList.length>0&&!e.disabled?n("div",[n("el-button",{staticStyle:{"margin-top":"10px","margin-right":"10px"},attrs:{icon:"el-icon-plus",size:"mini",type:"primary"},on:{click:e.addtogroup}},[e._v("添加联系人方式")]),e._v(" "),e.canTest?n("el-button",{staticStyle:{"margin-top":"10px"},attrs:{size:"mini",type:"success"},on:{click:e.testcontactModal}},[n("v-icon",{staticStyle:{"font-size":"12px"},attrs:{name:"iosspeedometeroutline"}}),e._v("\n        测试")],1):e._e()],1):e._e()]),e._v(" "),n("el-dialog",{attrs:{fullscreen:!e.isPc,visible:e.modaltestonlyspread,"append-to-body":"",title:"测试结果",width:"60%"},on:{"update:visible":function(t){e.modaltestonlyspread=t}}},[e.testloading?n("div",[e._v("加载中...")]):n("div",[e.testResult&&e.testResult.persons?n("div",["onlyspread"==e.testType?n("div",[e._v("\n          人员("+e._s(e.testResult.persons.length)+")：\n          "),0==e.testResult.persons.length?n("div",[e._v("无匹配人员")]):n("div",e._l(e.testResult.persons,function(t){return n("div",{key:t._uuid,staticClass:"label warning"},[e._v(e._s(t.name))])}),0)]):e._e()]):e._e()]),e._v(" "),n("div",{attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{size:"large"},on:{click:function(t){e.modaltestonlyspread=!1}}},[e._v("取消")])],1)]),e._v(" "),n("el-dialog",{attrs:{fullscreen:!e.isPc,visible:e.modaltest,"append-to-body":"",title:"测试数据填写",width:"60%"},on:{"update:visible":function(t){e.modaltest=t}}},[e.modaltest?n("div",[e._v("\n      测试数据：\n      "),n("br"),e._v(" "),"spread"==e.testType&&e.testData?n("div",[void 0!==e.testData.created_id?n("div",{staticStyle:{"margin-top":"10px"}},[e._v("\n          流程申请者：\n          "),n("treeselect",{attrs:{"value-consists-of":e.LEAF_PRIORITY,multiple:!1,options:e.singleDeptTree,placeholder:"输入流程的创建者"},model:{value:e.testData.created_id.data,callback:function(t){e.$set(e.testData.created_id,"data",t)},expression:"testData.created_id.data"}})],1):e._e(),e._v(" "),e.testformList.length>0||e.testformifList.length>0?n("el-card",{staticStyle:{margin:"10px 0"}},[n("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[n("span",[e._v("表单数据")])]),e._v(" "),e.testformList.length?n("el-form",{attrs:{"label-width":"120px"}},e._l(e.testformList,function(t,s){return n("div",{key:s},[n("el-form-item",{staticClass:"fz13",attrs:{label:t.name}},[n(t.componentName,{tag:"component",model:{value:e.testData.formdata[t.key],callback:function(n){e.$set(e.testData.formdata,t.key,n)},expression:"testData.formdata[item.key]"}})],1)],1)}),0):e._e(),e._v(" "),e.testformifList.length?n("el-form",{attrs:{"label-width":"120px"}},[e._l(e.testformifList,function(t,s){return n("div",{key:s},[n("el-form-item",{staticClass:"fz13",attrs:{label:t.name}},[n("el-input",{attrs:{placeholder:"输入测试数据",size:"mini"},model:{value:e.testData.formdata[t.key],callback:function(n){e.$set(e.testData.formdata,t.key,n)},expression:"testData.formdata[item.key]"}})],1)],1)}),e._v(" "),n("span",{staticClass:"fz12",staticStyle:{color:"red"}},[e._v("*如果测试的数据是多选情况，请用,隔开;比如宁波公司,杭州公司")])],2):e._e()],1):e._e(),e._v(" "),void 0!==e.testData.lastuser_id?n("div",{staticStyle:{"margin-top":"10px"}},[e._v("\n          上一级节点处理人：\n          "),n("treeselect",{attrs:{"value-consists-of":e.LEAF_PRIORITY,multiple:!1,options:e.singleDeptTree,placeholder:"输入流程上一个节点处理人"},model:{value:e.testData.lastuser_id.data,callback:function(t){e.$set(e.testData.lastuser_id,"data",t)},expression:"testData.lastuser_id.data"}})],1):e._e(),e._v(" "),void 0===e.testData.created_id&&void 0===e.testData.lastuser_id?n("el-alert",{attrs:{closable:!1,title:"此类型无需测试数据",type:"info"}}):e._e()],1):e._e(),e._v(" "),"permission"==e.testType&&e.testData?n("div",[void 0!==e.testData.permission_id?n("div",{staticStyle:{"margin-top":"10px"}},[e._v("\n          测试人：\n          "),n("treeselect",{attrs:{"value-consists-of":e.LEAF_PRIORITY,multiple:!0,options:e.multipleDeptTree,placeholder:"输入测试人"},model:{value:e.testData.permission_id.data,callback:function(t){e.$set(e.testData.permission_id,"data",t)},expression:"testData.permission_id.data"}}),e._v(" "),n("span",{staticStyle:{color:"red"}},[e._v("*请勿选择过多人。系统有限制")])],1):n("el-alert",{attrs:{closable:!1,title:"此类型无需测试数据",type:"info"}})],1):e._e()]):e._e(),e._v(" "),n("el-alert",{staticStyle:{"margin-top":"10px"},attrs:{title:"返回结果：",type:"success"}},[e.testloading?n("div",[e._v("加载中...")]):n("div",[e.testResult&&e.testResult.persons?n("div",["spread"==e.testType?n("div",[e._v("\n            人员：\n            "),0==e.testResult.persons.length?n("div",[e._v("无匹配人员")]):n("div",e._l(e.testResult.persons,function(t){return n("div",{key:t._uuid,staticClass:"label warning"},[e._v(e._s(t.name))])}),0)]):e._e(),e._v(" "),"permission"==e.testType?n("div",[0==e.testResult.persons.length?n("div",[e._v("无匹配人员")]):n("div",e._l(e.testResult.persons,function(t){return n("div",{key:t._uuid},[e._v(e._s(t.name)+":\n                "),t.hasPermission?n("span",{staticClass:"label success"},[e._v("允许")]):n("span",{staticClass:"label error"},[e._v("禁止")])])}),0)]):e._e()]):e._e()])]),e._v(" "),n("div",{attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{size:"large"},on:{click:e.canceltest}},[e._v("取消")]),e._v(" "),n("el-button",{attrs:{size:"large",type:"success"},on:{click:e.oktest}},[e._v("测试")])],1)],1),e._v(" "),n("el-dialog",{attrs:{fullscreen:!e.isPc,visible:e.modal1,"append-to-body":"",title:"联系人组编辑器",width:"60%"},on:{"update:visible":function(t){e.modal1=t}}},[n("el-form",{attrs:{"label-width":"120px"}},[n("el-form-item",{attrs:{label:"已选择项目："}},[0==e.chosed.length?n("span",[e._v("无")]):e._e(),e._v(" "),e._l(e.chosed,function(t,s){return n("span",{key:s},["role"==t.type?n("span",[e._v("[角色]"+e._s(t.name))]):e._e(),e._v(" "),"user"==t.type?n("span",[e._v("[个人]"+e._s(t.name))]):e._e(),e._v(" "),"dept"==t.type?n("span",[e._v("[部门]"+e._s(t.name)+"\n\n            "),n("sup",{staticClass:"fz12",staticStyle:{color:"#FF5722"}},[e._v("\n              ("+e._s(t.data&&t.data.coverage?t.data.coverage:e.deptWithSon?"n":"1")+")\n            ")])]):e._e(),e._v(" "),"form"==t.type?n("span",[e._v("[表单]"+e._s(t.name))]):e._e(),e._v(" "),"fun"==t.type?n("span",[e._v("[条件]"+e._s(t.name))]):e._e(),e._v(" "),"formif"==t.type?n("span",[e._v("[表单条件]"+e._s(t.name))]):e._e(),e._v(" "),s+1!=e.chosed.length?n("span",{staticStyle:{padding:"0 5px"}},["and"==e.chosetype?n("span",[e._v("and")]):e._e(),e._v(" "),"or"==e.chosetype?n("span",[e._v("or")]):e._e()]):e._e()])})],2),e._v(" "),n("el-form-item",{attrs:{label:"处理模式："}},[n("el-radio-group",{model:{value:e.chosetype,callback:function(t){e.chosetype=t},expression:"chosetype"}},[n("el-radio",{attrs:{label:"or"}},[n("el-tooltip",{attrs:{content:"并集：比如A员工/B员工，两个人都会通知到；"}},[n("span",[e._v("OR取并集")])])],1),e._v(" "),n("el-radio",{attrs:{label:"and"}},[n("el-tooltip",{attrs:{content:"交集：比如部门A+角色主管，会通知到A部门下的主管"}},[n("span",[e._v("AND取交集")])])],1)],1),e._v(" "),n("div",{staticClass:"fz12",staticStyle:{color:"red"}},[e._v("\n          说明：默认是并集： 联系人组之间是并集\n        ")])],1)],1),e._v(" "),n("div",{staticClass:"chosebox"},[e.modal1?n("chose-contact",{ref:"chosecontact",attrs:{"dept-with-son":e.deptWithSon,blacklist:e.blacklist,whitelist:e.whitelist,chosed:e.chosed,"with-group-chose":!0}}):e._e()],1),e._v(" "),e.deptWithSon?n("el-alert",{staticClass:"mg-t5",attrs:{closable:!1,title:"此处选取的部门默认此部门的树状结构下匹配,不论层级，亦可在部门上修改属性",type:"error"}}):n("el-alert",{staticClass:"mg-t5",attrs:{closable:!1,title:"此处选择的部门默认会选取到此部门一级中查询到人员工，比如a，b属于X部门，c属于X部门下Y部门。如果部门选择为X那么会选择a,b；（全公司除外，全公司会选取所有人），也可通过部门设置扩展其包含的范围",type:"error"}}),e._v(" "),e.withAdvanceSet?n("div",[n("div",{staticStyle:{"margin-top":"5px"}},[n("div",{staticStyle:{cursor:"pointer"},on:{click:e.advanceSet}},[e.sensiorset?n("i",{staticClass:"el-icon-caret-bottom"}):n("i",{staticClass:"el-icon-caret-right"}),e._v(" "),n("span",[e._v("高级设置")])]),e._v(" "),e.sensiorset?n("el-form",{attrs:{"label-width":"120px"}},[n("el-form-item",{attrs:{label:"部门Root："}},[n("el-select",{attrs:{multiple:"",placeholder:"默认按全局配置"},model:{value:e.runRoots,callback:function(t){e.runRoots=t},expression:"runRoots"}},e._l(e.DeptTree,function(e){return n("el-option",{key:e.id,attrs:{label:e.label,value:e.id}})}),1),e._v("\n            匹配Root模式\n            "),n("el-select",{attrs:{placeholder:"默认按全局配置"},model:{value:e.runRoottype,callback:function(t){e.runRoottype=t},expression:"runRoottype"}},[n("el-option",{attrs:{label:"全局模式",value:""}}),e._v(" "),n("el-option",{attrs:{label:"流程创建者",value:"creater"}}),e._v(" "),n("el-option",{attrs:{label:"按上一节点提交者",value:"lastuser"}})],1),e._v(" "),n("el-alert",{staticClass:"mg-t5",attrs:{closable:!1,type:"error",title:"*什么是部门ROOT?"}},[e._v("\n              部门Root是指该流程运行的组织架构中的环境；默认是按全局配置为准\n              "),n("br"),e._v("\n              运行到该流程时候，会根据创建者或上一个流程接收者 计算其所在的部门下的 匹配联系人 作为下一个节点的接收人。\n            ")]),e._v(" "),n("el-alert",{staticClass:"mg-t5",attrs:{closable:!1,type:"error",title:"*什么是匹配Root模式?"}},[e._v("\n              匹配模式是指在计算下一个节点接收人的时候，按创建者所在的部门计算 还是 上一个流程接受者所在的流程计算\n            ")])],1)],1):e._e()],1)]):e._e(),e._v(" "),n("div",{attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{size:"large"},on:{click:e.cancel}},[e._v("取消")]),e._v(" "),n("el-button",{attrs:{size:"large",type:"success"},on:{click:e.ok}},[e._v("确定")])],1)],1)],1)},staticRenderFns:[]};var le=n("VU/8")(oe,re,!1,function(e){n("4XXa"),n("bvdk")},"data-v-5ebb91b0",null).exports;a.a.use(r.a),a.a.use(r.a,{size:"medium"}),a.a.use(y.a),a.a.use(g.a,[{tag:"v-icon",prefix:"v-icon",type:"font"},{tag:"v-svg-icon",prefix:"v-icon",type:"svg"}]),a.a.use(s.a),a.a.use({install:function(e){e.component("ChoseUsers",O),e.component("ChoseDepts",j),e.component("ChoseUserStr",z),e.component("ChoseDeptStr",F),e.component("ChoseContact",G),e.component("ChoseDeptTreeStrExcludeJtgs",q),e.component("ChoseContactGroupModal",le)}}),a.a.config.productionTip=!1,a.a.prototype.isPc=!1,new a.a({el:"#app",router:m,store:f.a,components:{App:u},template:"<App/>"})},NmVa:function(e,t){},PnOH:function(e,t){},QTNz:function(e,t){},TIfe:function(e,t,n){"use strict";t.b=function(e){var t={agent:window.navigator.userAgent,uid:e,time:Date.parse(new Date)/1e3};return t.sign=d()(c()(t)+"&token="+h()),c()(t)},t.c=h,t.e=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return i.a.set(t||window.env.prod.CookieTokenKey,e)},t.d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return i.a.remove(e||window.env.prod.CookieTokenKey)},t.a=function(e,t){var n=new o.a({default_key_size:2048});return n.setPublicKey(r.Base64.decode(e)),n.encrypt(t)};var s=n("lbHh"),i=n.n(s),a=n("4C6m"),o=n.n(a),r=n("xrTZ"),l=(n.n(r),n("QykL")),c=n.n(l),u=n("L6bb"),d=n.n(u);function h(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return i.a.get(e||window.env.prod.CookieTokenKey)}},XbsD:function(e,t,n){"use strict";var s=n("//Fk"),i=n.n(s),a=n("8qP0"),o=n("Xlh3");t.a={state:{deptTree:[],userByDepts:[],RoleTrees:[]},mutations:{setdeptTree:function(e,t){e.deptTree=t},setuserByDepts:function(e,t){e.userByDepts=t,console.log(e.userByDepts)},setRoleTrees:function(e,t){e.RoleTrees=t}},getters:{deptTree:function(e){return e.deptTree}},actions:{getUserByDeptData:function(e){e.state;var t=e.commit;return new i.a(function(e,n){try{Object(a.d)().then(function(n){var s=n.data;if(s.success){var i=s.data;t("setuserByDepts",i),e(s)}else alert(s.msg)}).catch(function(e){n(e)})}catch(e){n(e)}})},GetRoleTree:function(e){e.state;var t=e.commit;return new i.a(function(e,n){try{Object(a.b)().then(function(n){var s=n.data;if(s.success){var i=s.data;t("setRoleTrees",i),e(s)}else alert(s.msg)}).catch(function(e){n(e)})}catch(e){n(e)}})},getDeptData:function(e){e.state;var t=e.commit;return new i.a(function(e,n){try{Object(a.c)().then(function(n){var s=n.data;if(s.success){var i=s.data;t("setdeptTree",Object(o.a)(i,"1")),e(s)}else alert(s.msg)}).catch(function(e){n(e)})}catch(e){n(e)}})}}}},Xlh3:function(e,t,n){"use strict";n.d(t,"c",function(){return r}),n.d(t,"d",function(){return c}),n.d(t,"f",function(){return u}),n.d(t,"e",function(){return d}),n.d(t,"b",function(){return h}),n.d(t,"a",function(){return p});var s=n("pFYg"),i=n.n(s),a=n("fZjL"),o=n.n(a),r=function(e){var t=[];return e.list&&(t=l(e.list)),t},l=function e(t){for(var n=[],s=0;s<t.length;s++){var i=t[s];if("grid"==i.type&&i.columns){if(i.columns.length)for(var a=0;a<i.columns.length;a++){var o=i.columns[a];o.list.length&&(n=n.concat(e(o.list)))}}else{var r=i.type;i.options.componentName&&(r=i.options.componentName),n.push({name:i.name,key:i.key,model:i.model,index:i.keyindex,type:r})}}return n},c=function(e){if(e.rules||(e.rules=[]),o()(e.options).indexOf("options")>=0&&0==e.options.remote){var t=e.options.options.map(function(e){return e.value});if(console.log(e.name),e.options.defaultValue){if(e.options.defaultValue.constructor==Array)for(var n=function(n){var s=e.options.defaultValue[n];t.some(function(e){return e==s})||e.options.defaultValue.splice(n,1)},s=e.options.defaultValue.length-1;s>=0;s--)n(s);e.options.defaultValue.constructor==String&&(t.some(function(t){return t==e.options.defaultValue})||(e.options.defaultValue=null))}}console.log("调整后的表单设置",e)},u=function(e){for(var t=[{n:"待处理",v:1},{n:"取消",v:2},{n:"撤回",v:8},{n:"处理结束",v:3},{n:"或签结束",v:4},{n:"消息模式",v:5},{n:"抄送模式",v:6},{n:"结束s",v:7}],n=0;n<t.length;n++){var s=t[n];if(s.v==e)return s.n}return"无"},d=function(e){for(var t=[{n:"通知",v:"message"},{n:"会签",v:"andsign"},{n:"或签",v:"orsign"}],n=0;n<t.length;n++){var s=t[n];if(s.v==e)return s.n}return"无"},h=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,s=function(e){for(var n=0;n<t.length;n++){var s=t[n];if(s.key==e)return console.log("ele.loc",s.loc),s.loc}return"0 100"};console.log("nowfunid",n);for(var a=[],o=[],r=function(e,t){if(e){("object"===(void 0===e?"undefined":i()(e))?e:[e]).forEach(function(e){e&&o.push({from:t.id,to:e})})}},l=function(e,t){if(e){("object"===(void 0===e?"undefined":i()(e))?e:[e]).forEach(function(e){e.v&&(o.push({from:t.id,to:e.v}),function(e,t){for(var n=0;n<e.length;n++)if(e[n].key==t)return!0;return!1}(a,e.v)||a.push({loc:s(e.v),key:e.v,text:"【外部流程】"+e.n,color:"#515a6e",stroke:"white"}))})}},c=function(t){var i=e[t];if(a.push({loc:s(i.id),key:i.id,stroke:n==i.id?"white":"black",text:i.name+(i.is_start?"":"("+d(i.dealtype)+")")+(n==i.id?"[当前位置]":""),color:n==i.id?"#f704c2":i.is_start?"orange":"lightblue"}),!i.is_start&&"message"==i.dealtype)return"continue";for(var o=0;o<i.btnGroup.length;o++){var c=i.btnGroup[o];if("andsign"==i.dealtype&&0!=o)break;r(c.defaultFunId,i),l(c.defaultSonFlowId,i),console.log(c.handler),c.handler&&c.handler.funId&&r(c.handler.funId,i),c.handler&&c.handler.SonFlowId&&l(c.handler.SonFlowId,i),c.NextFun.forEach(function(e){e.funId&&r(e.funId,i),e.SonFlowId&&l(e.SonFlowId,i)})}},u=0;u<e.length;u++)c(u);return{linkDataArray:o,nodeDataArray:a}},p=function e(t,n){for(var s=[],i=0;i<t.length;i++){var a=t[i];a.expand=!0,a.parent_id==n&&(console.log(s),a.children=e(t,a._uuid),s.push(a))}return s}},bvdk:function(e,t){},kLyD:function(e,t){},l6IN:function(e,t){e.exports=ELEMENT},lRwf:function(e,t){e.exports=Vue},mBjh:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e,t){var n=document.createElement("_"),s=n.appendChild(document.createElement("_")),i=n.appendChild(document.createElement("_")),a=s.appendChild(document.createElement("_")),o=void 0,r=void 0;return s.style.cssText=n.style.cssText="height:100%;left:0;opacity:0;overflow:hidden;pointer-events:none;position:absolute;top:0;transition:0s;width:100%;z-index:-1",a.style.cssText=i.style.cssText="display:block;height:100%;transition:0s;width:100%",a.style.width=a.style.height="200%",e.appendChild(n),l(),function(){c(),e.removeChild(n)};function l(){c();var a=e.offsetWidth,u=e.offsetHeight;a===o&&u===r||(o=a,r=u,i.style.width=2*a+"px",i.style.height=2*u+"px",n.scrollLeft=n.scrollWidth,n.scrollTop=n.scrollHeight,s.scrollLeft=s.scrollWidth,s.scrollTop=s.scrollHeight,t({width:a,height:u})),s.addEventListener("scroll",l),n.addEventListener("scroll",l)}function c(){s.removeEventListener("scroll",l),n.removeEventListener("scroll",l)}}},nLpc:function(e,t){},nsZj:function(e,t){},pRNm:function(e,t){e.exports=VueRouter},uJjm:function(e,t){},vLgD:function(e,t,n){"use strict";var s=n("//Fk"),i=n.n(s),a=n("mtWM"),o=n.n(a),r=n("l6IN"),l=(n.n(r),n("IcnI")),c=n("TIfe"),u=o.a.create({baseURL:window.baseURL,timeout:3e4,transformResponse:[function(e){return e&&e.constructor==String?n("av0m").parse(e):e}]});u.interceptors.request.use(function(e){if(l.a.getters.token){for(var t in console.log("config",e),"test"==window.envname&&e.canTest?e.headers[window.env.test.HeaderTokenKey]=Object(c.c)(window.env.test.CookieTokenKey):e.headers[window.env.prod.HeaderTokenKey]=Object(c.c)(),e.data||(e.data={}),window.env){var n=window.env[t],s=Object(c.c)(n.CookieTokenKey);s&&(e.headers[n.HeaderTokenKey]=s,e.data&&"FormData"==e.data.constructor.name?e.data.append(n.postTokenKey,s):e.data[n.postTokenKey]=s)}e.data&&"FormData"==e.data.constructor.name?e.data.append("_href",window.location.href):e.data._href=window.location.href}return e},function(e){console.log(e),i.a.reject(e)}),u.interceptors.response.use(function(e){return e},function(e){return console.log("err"+e),console.log(e),window.error_test=e,Object(r.Message)({message:e.response.data.message?e.response.data.message:e.message,type:"error",duration:5e3}),i.a.reject(e)}),t.a=u},wMeh:function(e,t){},yhUs:function(e,t){}},["NHnr"]);