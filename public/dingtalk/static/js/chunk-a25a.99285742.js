(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-a25a"],{G65v:function(e,t,n){},I6k0:function(e,t,n){"use strict";n.r(t);var o=n("QbLZ"),a=n.n(o),s=n("itRl"),r=n("3EzZ"),l=n("L2JU"),i={name:"Contacts",components:{treeTable:s.a},data:function(){return{loading:!1,error:null,tabtype:"dept",deptcolumns:[{text:"部门名称",value:"deptname",width:"250px"},{text:"员工名称",value:"username",width:"100px"},{text:"员工工号",value:"userjobid",width:"80px"}],rolecolumns:[{text:"组名称",value:"groupname",width:"150px"},{text:"角色名称",value:"rolename",width:"150px"},{text:"员工名",value:"username",width:"150px"},{text:"员工工号",value:"userjobid",width:"150px"}]}},computed:a()({},Object(l.e)({userByDepts:function(e){return e.contact.userByDepts},RoleTrees:function(e){return e.contact.RoleTrees}})),methods:a()({},Object(l.b)(["GetRoleTree","getUserByDeptData"]),{UserDeptRoleStoreDataRest:function(){var e=this;this.loading=!0,Object(r.e)().then(function(t){var n=t.data;e.loading=!1,n.success?e.$message.success(n.msg):e.$message.error(n.msg)})},showdetail:function(e){var t="";"dept"==e.type&&(t="<strong>"+e.deptname+"</strong>"),"user"==e.type&&(t="<strong>"+e.username+"</strong>"),this.$alert(t+"<br>内部id号："+e._uuid,"详细",{dangerouslyUseHTMLString:!0})},SyncFromDingtalkByUserid:function(e){var t=this;this.loading=!0,Object(r.d)({uuid:e}).then(function(e){var n=e.data;t.loading=!1,n.success?t.$message.success(n.msg):t.$message.error(n.msg),console.log(n)})},importDataFormDingtalk:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"dept";this.loading=!0,Object(r.b)(t).then(function(t){var n=t.data;e.loading=!1,n.success?(e.$message.success(n.msg),window.history.go(0)):e.$message.error(n.msg),console.log(n)})}}),activated:function(){console.log("activated")},mounted:function(){var e=this;0==this.userByDepts.length&&this.getUserByDeptData().then(),0==this.RoleTrees.length&&this.GetRoleTree().then(function(e){return console.log(e)}),setTimeout(function(){console.log(e.RoleTrees)},3e3)}},u=(n("dsJf"),n("KHd+")),c=Object(u.a)(i,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-card",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"box-card"},[e.error?n("el-alert",{attrs:{title:e.error,closable:!1,type:"error"}}):n("div",[e._v("\n            内部联系人管理"),n("br"),e._v(" "),n("el-button",{on:{click:function(t){e.importDataFormDingtalk("dept")}}},[e._v("第一步：企业云oa <- 同步到 <- 钉钉 （部门信息）")]),e._v(" "),n("br"),e._v(" "),n("el-button",{on:{click:function(t){e.importDataFormDingtalk("role")}}},[e._v("第二步：企业云oa <- 同步到 <- 钉钉 （角色+角色组信息）")]),e._v(" "),n("br"),e._v(" "),n("el-button",{on:{click:function(t){e.importDataFormDingtalk("user")}}},[e._v("第三步：企业云oa <- 同步到 <- 钉钉 （员工信息） ")]),e._v(" "),n("hr"),e._v(" "),n("el-tooltip",{attrs:{effect:"light",content:"当对员工，部门，角色进行修改后，点击此处进行重新生成缓存数据",placement:"top-start"}},[n("el-button",{attrs:{type:"warning"},on:{click:e.UserDeptRoleStoreDataRest}},[e._v("重新生成缓存数据")])],1),e._v(" "),n("div",[e.loading?e._e():n("el-tabs",{model:{value:e.tabtype,callback:function(t){e.tabtype=t},expression:"tabtype"}},[n("el-tab-pane",{attrs:{label:"组织架构",name:"dept"}},[n("tree-table",{attrs:{"expand-all":!0,"row-key":"_uuid",columns:e.deptcolumns,data:e.userByDepts}},[n("el-table-column",{attrs:{label:"角色",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){var o=t.row;return["user"==o.type?n("span",[o.roles.length?n("span",e._l(o.roles,function(t,a){return n("span",{key:t._uuid},[e._v("\n                                                                    "+e._s(t.rolename)+"\n                                                                    "),o.roles.length-1!=a?n("span",[e._v("|")]):e._e()])})):e._e()]):e._e()]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"操作",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){var o=t.row;return["user"==o.type?n("el-button",{attrs:{type:"text"},on:{click:function(t){e.SyncFromDingtalkByUserid(o._uuid)}}},[e._v("钉钉同步")]):e._e(),e._v(" "),n("el-button",{attrs:{type:"text"},on:{click:function(t){e.showdetail(o)}}},[e._v("查看")])]}}])})],1)],1),e._v(" "),n("el-tab-pane",{attrs:{label:"角色",name:"role"}},[n("tree-table",{attrs:{"row-key":"_uuid","expand-all":!0,columns:e.rolecolumns,data:e.RoleTrees}})],1)],1)],1)],1)],1)],1)},[],!1,null,null,null);c.options.__file="contacts.vue";t.default=c.exports},dsJf:function(e,t,n){"use strict";var o=n("G65v");n.n(o).a},jr1U:function(e,t,n){e.exports={default:n("wObO"),__esModule:!0}},wObO:function(e,t){e.exports=function(){return Function.call.apply(Array.prototype.concat,arguments)}}}]);