(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-3326","chunk-120a"],{"/AME":function(e,t,c){"use strict";c.r(t);var n=c("79Hv"),i=c("USVN"),s={name:"CFlowPreviewSubmit",components:{Divider:n.default},props:{previewdata:{type:Object,default:function(){return null}},buttoninfo:{type:Object,default:function(){return null}}},data:function(){return{nextFlowList:[],nextSonFlowList:[],minishownumber:30}},activated:function(){},mounted:function(){this.initdata()},methods:{whenmsgcheckchange:function(e){if(console.log("whenmsgcheckchange"),0==e.msgcheck.length)return e.allmsgcheck=!1,void(e.msgisIndeterminate=!1);e.msgcheck.length==e.msglist.length?(e.allmsgcheck=!0,e.msgisIndeterminate=!1):e.msgisIndeterminate=!0},whencccheckchange:function(e){if(console.log("whencccheckchange"),0==e.cccheck.length)return e.allcccheck=!1,void(e.ccisIndeterminate=!1);e.cccheck.length==e.cclist.length?(e.allcccheck=!0,e.ccisIndeterminate=!1):e.ccisIndeterminate=!0},whenallmsgcheckchange:function(e){if(e.msgisIndeterminate=!1,1==e.allmsgcheck){var t=[];e.msglist.forEach(function(e){t.push(e.to)}),e.msgcheck=t}else e.msgcheck=[]},whenallcccheckchange:function(e){if(e.ccisIndeterminate=!1,1==e.allcccheck){var t=[];e.cclist.forEach(function(e){t.push(e.to)}),e.cccheck=t}else e.cccheck=[]},getdata:function(){var e=this,t=[];this.nextFlowList.forEach(function(e){t.push({funid:e.funid,dealtype:e.dealtype,funname:e.funname,cccheck:e.cccheck,msgcheck:e.msgcheck,flowcheck:e.check})});var c=!1;return t.forEach(function(t){t.flowcheck&&("orsign"==t.dealtype&&0==t.msgcheck.length&&(c=!0,e.$message.error("<"+t.funname+">或签不可为空")),"andsign"==t.dealtype&&0==t.msgcheck.length&&(c=!0,e.$message.error("<"+t.funname+">会签不可为空")))}),c?{}:{funlist:t,sonflows:this.nextSonFlowList}},tran_dealtype:function(e){return Object(i.f)(e)},getcheckboxlist:function(e){var t=[];return e.forEach(function(e){t.push(e.to)}),t},initdata:function(){var e=this;this.nextSonFlowList=[],this.previewdata.data&&this.previewdata.data.nextSonFlows&&this.previewdata.data.nextSonFlows.forEach(function(t){e.nextSonFlowList.push({flowname:t.n,flowid:t.v,check:!0})}),this.nextFlowList=[],this.previewdata.data&&this.previewdata.data.nextmessage&&this.previewdata.data.nextmessage.forEach(function(t){for(var c=!1,n=0;n<e.nextFlowList.length;n++){if(e.nextFlowList[n].funid==t.funid){c=!0;break}}c?(e.nextFlowList[n].msglist=t.list,e.nextFlowList[n].msgcheck=e.getcheckboxlist(t.list),e.nextFlowList[n].hidemsg=t.list.length>e.minishownumber):e.nextFlowList.push({allmsgcheck:!0,msgisIndeterminate:!1,ccisIndeterminate:!1,allcccheck:!0,check:!0,hidemsg:t.list.length>e.minishownumber,hidecc:!1,dealtype:t.dealtype,funname:t.funname,funid:t.funid,msglist:t.list,msgcheck:e.getcheckboxlist(t.list),cclist:[],cccheck:[]})}),this.previewdata.data&&this.previewdata.data.cc&&this.previewdata.data.cc.forEach(function(t){for(var c=!1,n=0;n<e.nextFlowList.length;n++){if(e.nextFlowList[n].funid==t.funid){c=!0;break}}c?(e.nextFlowList[n].cclist=t.list,e.nextFlowList[n].cccheck=e.getcheckboxlist(t.list),e.nextFlowList[n].hidecc=t.list.length>e.minishownumber):e.nextFlowList.push({allmsgcheck:!0,allcccheck:!0,msgisIndeterminate:!1,ccisIndeterminate:!1,check:!0,hidemsg:!1,hidecc:t.list.length>e.minishownumber,dealtype:"",funname:t.funname,funid:t.funid,cclist:t.list,cccheck:e.getcheckboxlist(t.list),msglist:[],msgcheck:[]})})}}},a=(c("i8Vn"),c("KHd+")),l=Object(a.a)(s,function(){var e=this,t=e.$createElement,c=e._self._c||t;return c("div",{staticClass:"cflowpreviewsubmit"},[c("el-form",{attrs:{"label-width":e.isPc?"180px":null}},[c("el-form-item",{attrs:{label:"状态:"}},[e._v("\n        "+e._s(e.previewdata.msg)+"\n      ")]),e._v(" "),e.previewdata.data?c("el-form-item",{attrs:{label:"流程名称:"}},[e._v("\n        "+e._s(e.previewdata.data.flowname)+"\n      ")]):e._e(),e._v(" "),0==e.nextFlowList.length&&e.nextSonFlowList.length?c("div",[c("Divider",{staticClass:"fz13",attrs:{title:"无下一步环节"}})],1):e._e(),e._v(" "),e.nextSonFlowList.length>0?c("Divider",{staticStyle:{"margin-bottom":"0px"},attrs:{title:"下一步转交其他流程"}}):e._e(),e._v(" "),c("el-form-item",{staticClass:"fz12"},e._l(e.nextSonFlowList,function(t,n){return c("div",{key:n},[c("el-checkbox",{attrs:{disabled:!e.buttoninfo.canchoseflow},model:{value:t.check,callback:function(c){e.$set(t,"check",c)},expression:"flow.check"}},[c("span",{staticClass:"fz13"},[e._v("转发外部流程< "+e._s(t.flowname)+">")])])],1)})),e._v(" "),e.nextFlowList.length>0?c("Divider",{staticStyle:{"margin-bottom":"0px"},attrs:{title:"下一步转交流程"}}):e._e(),e._v(" "),e._l(e.nextFlowList,function(t,n){return c("el-form-item",{key:n,staticClass:"fz12",staticStyle:{"border-bottom":"1px dashed #c1c1c0"}},[c("div",[c("el-checkbox",{attrs:{disabled:!e.buttoninfo.canchoseflow},model:{value:t.check,callback:function(c){e.$set(t,"check",c)},expression:"flow.check"}},[c("span",{staticClass:"fz13"},[e._v("转发流程< "+e._s(t.funname)+">")])])],1),e._v(" "),t.msglist.length>0?c("div",{staticStyle:{"padding-left":"20px"}},[e._v("\n          转交处理人"),c("span",{staticClass:"label error"},[e._v(e._s(e.tran_dealtype(t.dealtype)))]),e._v(" "),c("br"),e._v(" "),c("el-checkbox",{attrs:{disabled:"andsign"==t.dealtype&&!e.buttoninfo.canchoseander||!t.check||"orsign"==t.dealtype&&!e.buttoninfo.canchoseorer||"message"==t.dealtype&&!e.buttoninfo.canchosecc,indeterminate:t.msgisIndeterminate},on:{change:function(c){e.whenallmsgcheckchange(t)}},model:{value:t.allmsgcheck,callback:function(c){e.$set(t,"allmsgcheck",c)},expression:"flow.allmsgcheck"}},[e._v("全/反选")]),e._v(" "),c("div",{staticClass:"accordionBox",class:{mustshow:t.msglist.length<e.minishownumber,hide:t.hidemsg,show:!t.hidemsg}},[c("el-checkbox-group",{attrs:{disabled:"andsign"==t.dealtype&&!e.buttoninfo.canchoseander||!t.check||"orsign"==t.dealtype&&!e.buttoninfo.canchoseorer||"message"==t.dealtype&&!e.buttoninfo.canchosecc},on:{change:function(c){e.whenmsgcheckchange(t)}},model:{value:t.msgcheck,callback:function(c){e.$set(t,"msgcheck",c)},expression:"flow.msgcheck"}},e._l(t.msglist,function(t,n){return c("span",{key:n,staticClass:"namelist fz12"},[c("el-checkbox",{attrs:{label:t.to}},[e._v(e._s(t.name))])],1)})),e._v(" "),c("div",{staticClass:"accordionHandler",on:{click:function(e){t.hidemsg=!t.hidemsg}}},[t.hidemsg?c("i",{staticClass:"el-icon-arrow-down"}):c("i",{staticClass:"el-icon-arrow-up"})])],1)],1):e._e(),e._v(" "),t.cclist.length>0?c("div",{staticStyle:{"padding-left":"20px"}},[e._v("\n          抄送人："),c("br"),e._v(" "),c("el-checkbox",{attrs:{disabled:!t.check||!e.buttoninfo.canchosecc,indeterminate:t.ccisIndeterminate},on:{change:function(c){e.whenallcccheckchange(t)}},model:{value:t.allcccheck,callback:function(c){e.$set(t,"allcccheck",c)},expression:"flow.allcccheck"}},[e._v("全/反选")]),e._v(" "),c("div",{staticClass:"accordionBox",class:{mustshow:t.cclist.length<e.minishownumber,hide:t.hidecc,show:!t.hidecc}},[c("el-checkbox-group",{attrs:{disabled:!t.check||!e.buttoninfo.canchosecc},on:{change:function(c){e.whencccheckchange(t)}},model:{value:t.cccheck,callback:function(c){e.$set(t,"cccheck",c)},expression:"flow.cccheck"}},e._l(t.cclist,function(t,n){return c("span",{key:n,staticClass:"namelist fz12"},[c("el-checkbox",{attrs:{label:t.to}},[e._v("\n                  "+e._s(t.name)+"\n                ")])],1)})),e._v(" "),c("div",{staticClass:"accordionHandler",on:{click:function(e){t.hidecc=!t.hidecc}}},[t.hidecc?c("i",{staticClass:"el-icon-arrow-down"}):c("i",{staticClass:"el-icon-arrow-up"})])],1)],1):e._e()])})],2)],1)},[],!1,null,"7ce29c48",null);l.options.__file="CFlowPreviewSubmit.vue";t.default=l.exports},"79Hv":function(e,t,c){"use strict";c.r(t);var n={name:"Divider",props:{title:{type:String,default:function(){return""}}}},i=(c("YnOI"),c("KHd+")),s=Object(i.a)(n,function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"ivu-divider ivu-divider-horizontal ivu-divider-with-text-center"},[t("span",{staticClass:"ivu-divider-inner-text"},[this._v("\n    "+this._s(this.title)+"\n  ")])])},[],!1,null,null,null);s.options.__file="CDivider.vue";t.default=s.exports},H9at:function(e,t,c){},VLhH:function(e,t,c){},YnOI:function(e,t,c){"use strict";var n=c("H9at");c.n(n).a},i8Vn:function(e,t,c){"use strict";var n=c("VLhH");c.n(n).a}}]);