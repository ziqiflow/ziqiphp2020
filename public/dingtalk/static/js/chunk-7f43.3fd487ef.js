(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-7f43","chunk-381f","chunk-5760"],{"+G4c":function(t,e,l){"use strict";var a=l("9Gar");l.n(a).a},"9Gar":function(t,e,l){},CgH0:function(t,e,l){"use strict";var a=l("dBFg");l.n(a).a},L1Ce:function(t,e,l){"use strict";l.r(e);var a=l("QbLZ"),n=l.n(a),s=l("Bs5o"),i=l("YCPF"),o=l("L2JU"),r={name:"Cmodaldealer",computed:n()({},Object(o.e)({flowBadge:function(t){return t.user.flowBadge}})),components:{FlowDealer:s.default,FlowDetail:i.default},data:function(){return{error:null,modalstatu:!1,title:null,successShow:!1,tabname:"flow.dealer",flowmsgid:null,flowOi_id:null,nowfunid:null,isFullScreen:!1}},watch:{},mounted:function(){},methods:{toggleFullScreen:function(){this.isFullScreen=!this.isFullScreen},revokeSuccess:function(){this.modalstatu=!1,this.flowBadge.waiting--,this.$emit("need-refresh")},dealSuccess:function(){this.flowBadge.waiting--,this.$emit("need-refresh")},cancelSuccess:function(){this.modalstatu=!1,this.flowBadge.waiting--,this.$emit("need-refresh")},cancel:function(){this.modalstatu=!1},loadmodal:function(t,e,l,a){this.flowOi_id=e,this.flowmsgid=t,this.title=l,this.modalstatu=!0,this.nowfunid=a,console.log("nowfunidmodal",a)}}},c=(l("CgH0"),l("KHd+")),u=Object(c.a)(r,function(){var t=this,e=t.$createElement,l=t._self._c||e;return l("div",[l("el-dialog",{attrs:{width:"75%",fullscreen:!t.isPc||t.isFullScreen,"close-on-click-modal":!1,title:t.title,visible:t.modalstatu},on:{"update:visible":function(e){t.modalstatu=e}}},[t.isPc?l("span",{staticClass:"maxzoom"},[t.isFullScreen?l("svg-icon",{staticClass:"fz12",staticStyle:{color:"grey"},attrs:{"icon-class":"exit-fullscreen"},nativeOn:{click:function(e){return t.toggleFullScreen(e)}}}):l("svg-icon",{staticClass:"fz12",staticStyle:{color:"grey"},attrs:{"icon-class":"fullscreen"},nativeOn:{click:function(e){return t.toggleFullScreen(e)}}})],1):t._e(),t._v(" "),t.modalstatu?l("div",[t.successShow?t._e():l("div",[l("el-tabs",{attrs:{type:"card"},model:{value:t.tabname,callback:function(e){t.tabname=e},expression:"tabname"}},[l("el-tab-pane",{attrs:{label:"审核流程",name:"flow.dealer"}},["flow.dealer"==t.tabname?l("div",[l("flow-dealer",{attrs:{flowmsgid:t.flowmsgid},on:{"on-revoke-success":t.revokeSuccess,"on-deal-success":t.dealSuccess,"on-cancel-success":t.cancelSuccess,"update:flowmsgid":function(e){t.flowmsgid=e}}})],1):t._e()]),t._v(" "),l("el-tab-pane",{attrs:{label:"流程信息",name:"flow.detail"}},["flow.detail"==t.tabname?l("div",[l("flow-detail",{attrs:{nowfunid:t.nowfunid,"flow-oi-id":t.flowOi_id},on:{"update:nowfunid":function(e){t.nowfunid=e},"update:flowOiId":function(e){t.flowOi_id=e}}})],1):t._e()])],1)],1)]):t._e(),t._v(" "),l("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"})])],1)},[],!1,null,"337a8034",null);u.options.__file="CModalFlowDealer.vue";e.default=u.exports},Lp68:function(t,e,l){"use strict";var a=l("fDSt");l.n(a).a},dBFg:function(t,e,l){},fDSt:function(t,e,l){},lvaK:function(t,e,l){"use strict";l.r(e);var a=l("YEIV"),n=l.n(a),s=l("YCPF"),i=n()({name:"Cmodaldetail",props:{isAdmin:{type:Boolean,default:function(){return!1}}},components:{FlowDetail:s.default},data:function(){return{error:null,modalstatu:!1,title:null,successShow:!1,tabname:"flow.dealer",flowmsgid:null,flowOi_id:null,nowfunid:null,isFullScreen:!1}},watch:{},mounted:function(){},methods:{}},"methods",{cancel:function(){this.modalstatu=!1},toggleFullScreen:function(){this.isFullScreen=!this.isFullScreen},loadmodal:function(t,e,l){this.flowOi_id=t,console.log("flowOi_id",t),this.title=e,this.modalstatu=!0,this.nowfunid=l}}),o=(l("Lp68"),l("KHd+")),r=Object(o.a)(i,function(){var t=this,e=t.$createElement,l=t._self._c||e;return l("div",[l("el-dialog",{attrs:{fullscreen:!t.isPc||t.isFullScreen,title:t.title,width:"75%",visible:t.modalstatu,"close-on-click-modal":!1},on:{"update:visible":function(e){t.modalstatu=e}}},[t.isPc?l("span",{staticClass:"maxzoom"},[t.isFullScreen?l("svg-icon",{staticClass:"fz12",staticStyle:{color:"grey"},attrs:{"icon-class":"exit-fullscreen"},nativeOn:{click:function(e){return t.toggleFullScreen(e)}}}):l("svg-icon",{staticClass:"fz12",staticStyle:{color:"grey"},attrs:{"icon-class":"fullscreen"},nativeOn:{click:function(e){return t.toggleFullScreen(e)}}})],1):t._e(),t._v(" "),t.modalstatu?l("div",[l("flow-detail",{attrs:{nowfunid:t.nowfunid,"flow-oi-id":t.flowOi_id,"is-admin":t.isAdmin},on:{"update:nowfunid":function(e){t.nowfunid=e},"update:flowOiId":function(e){t.flowOi_id=e}}})],1):t._e(),t._v(" "),l("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[l("el-button",{on:{click:t.cancel}},[t._v("取 消")])],1)])],1)},[],!1,null,"1edda0f8",null);r.options.__file="CModalFlowDetail.vue";e.default=r.exports},uenu:function(t,e,l){"use strict";l.r(e);var a=l("lYLF"),n=l("wThw"),s=l("L1Ce"),i=l("lvaK"),o=l("Fnmp"),r={name:"Cflowlist",components:{ModalFlowDealer:s.default,ModalFlowDetail:i.default,FlowLog:o.default},mixins:[n.a],data:function(){return{searchFun:a.E}},activated:function(){},mounted:function(){},methods:{}},c=(l("+G4c"),l("KHd+")),u=Object(c.a)(r,function(){var t=this,e=t.$createElement,l=t._self._c||e;return l("div",[t.error?l("el-alert",{attrs:{title:t.error,closable:!1,type:"error"}}):l("div",[l("el-card",{staticStyle:{"margin-bottom":"20px"},attrs:{"body-style":{padding:"0px"}}},[l("div",{staticClass:"clearfix",attrs:{slot:"header","body-style":{padding:"0px"}},slot:"header"},[l("span",[l("i",{staticClass:"el-icon-search"}),t._v("\n                搜索栏")]),t._v(" "),t.searchbarShow?l("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"},on:{click:function(e){t.searchbarShow=!1}}},[t._v("关闭")]):l("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"},on:{click:function(e){t.searchbarShow=!0}}},[t._v("展开")])],1),t._v(" "),t.searchbarShow?l("el-form",{staticStyle:{margin:"10px"},attrs:{size:"mini","label-width":"80px"}},[l("el-form-item",{attrs:{label:"流程名称"}},[l("el-input",{model:{value:t.search.flowname,callback:function(e){t.$set(t.search,"flowname",e)},expression:"search.flowname"}})],1),t._v(" "),l("el-form-item",[l("el-button",{attrs:{type:"primary"},on:{click:t.searchSummit}},[t._v("搜索")])],1)],1):t._e()],1),t._v(" "),l("el-card",[t.searchloading?l("div",{staticClass:"box  pd10 mg10 text-center"},[t._v("\n      正在加载中。。。\n    ")]):t._e(),t._v(" "),0!=t.page.result.length||t.searchloading?t._e():l("div",{staticClass:"box pd10 mg10 text-center"},[t._v("无任何记录")]),t._v(" "),0!=t.page.result.length?l("div",{staticClass:"box"},[l("div",[t._v("共搜索到\n      "),l("span",[t._v(t._s(t.page.totalItems))]),t._v(" 条信息")]),t._v(" "),l("el-table",{staticStyle:{width:"100%"},attrs:{data:t.page.result,stripe:""}},[l("el-table-column",{attrs:{label:"流程名称",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[l("strong",[t._v(t._s(e.row.flowname))])]}}])}),t._v(" "),l("el-table-column",{attrs:{label:"流程描述",width:"230"},scopedSlots:t._u([{key:"default",fn:function(e){var l=e.row;return[t._v("\n            "+t._s(l.flowlistOi.desc)+"\n          ")]}}])}),t._v(" "),l("el-table-column",{attrs:{label:"文号",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){var l=e.row;return[t._v("\n            "+t._s(l.flowlistOi.workname)+"\n          ")]}}])}),t._v(" "),l("el-table-column",{attrs:{label:"流程创建时间",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[l("div",[t._v(" 创建于 "+t._s(t.friendlytimejs(e.row.flowlistOi.created_at))+"\n            "),l("span",{staticClass:"person"},[t._v(" "+t._s(e.row.flowlistOi.creater))])]),t._v(" "),l("div",{staticClass:"mg-t5"},[t._v("转到此处："+t._s(t.friendlytimejs(e.row.created_at))+"\n             "),l("span",{staticClass:"person"},[t._v(" "+t._s(e.row.creater))])])]}}])}),t._v(" "),l("el-table-column",{attrs:{label:"处理节点",width:"220"},scopedSlots:t._u([{key:"default",fn:function(e){return[l("span",{staticClass:"label warning"},[t._v("\n              "+t._s(e.row.NowFunName)+"\n            ")]),t._v("\n            来自\n            \n            "),l("span",{staticClass:"label success fz12"},[t._v(t._s(e.row.PreFunName))]),t._v(" "),l("v-icon",{staticStyle:{cursor:"pointer","margin-left":"5px"},attrs:{name:"ios-git-network"},on:{click:t.showflowgraph}})]}}])}),t._v(" "),l("el-table-column",{attrs:{fixed:"right",label:"操作",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[l("el-button",{staticStyle:{"margin-right":"5px"},attrs:{type:"primary",size:"small"},on:{click:function(e){t.dealflow(a)}}},[t._v("处理")]),t._v(" "),l("el-button",{attrs:{type:"error",size:"small"},on:{click:function(e){t.seedetail(a)}}},[t._v("查看流程")])]}}])})],1),t._v(" "),l("el-pagination",{attrs:{"current-page":t.page.currentPage,"page-size":t.page.pageSize,total:t.page.totalItems,background:"",layout:"prev, pager, next"},on:{"current-change":t.handerPageChange}})],1):t._e()])],1),t._v(" "),t.candeal?l("modal-flow-dealer",{ref:"flowdealer",on:{"need-refresh":function(e){t.searchdata(1)}}}):t._e(),t._v(" "),l("modal-flow-detail",{ref:"flowdetail"})],1)},[],!1,null,"22349257",null);u.options.__file="CFlowListWaiting.vue";e.default=u.exports},wThw:function(t,e,l){"use strict";var a=l("QbLZ"),n=l.n(a),s=l("L2JU"),i=l("k48p");e.a={name:"flowlist",computed:n()({},Object(s.e)({flowBadge:function(t){return t.user.flowBadge}})),components:{},data:function(){return{candeal:!1,searchFun:null,error:null,columns:[{title:"流程名称",slot:"flowdesignername"},{title:"流程描述",slot:"flow_desc"},{title:"流程创建时间",slot:"flow_created_at"},{title:"处理节点",slot:"flowstatusat"},{title:"可操作",slot:"action",width:150,align:"center"}],searchbarShow:!1,searchloading:!1,search_list:null,orderby_list:null,display_list:null,search:{s_isorder:null,s_orderby:null},page:{result:[],totalItems:0,pageSize:20,currentPage:1}}},methods:{initsearch:function(){},searchSummit:function(){this.searchdata(1)},friendlytimejs:function(t){return Object(i.a)(t,new Date)},seedetail:function(t){this.$refs.flowdetail.loadmodal(t.flowlistid,"查看 "+t.flowname+" 明细",t.NowFunid)},dealflow:function(t){var e=this;console.log("mesObj",t),this.candeal=!1,setTimeout(function(){e.candeal=!0,setTimeout(function(){e.$refs.flowdealer.loadmodal(t._id,t.flowlistid,"审批"+t.flowname+"<"+t.NowFunName+">",t.NowFunid)},100)},100)},handerPageChange:function(t){this.searchdata(t)},showflowgraph:function(){this.$message.info("此处后期显示流程图")},getflowfunByfunid:function(t,e){for(var l=0;l<t.funlist.length;l++){var a=t.funlist[l];if(a.id==e)return a}return null},initresultdata:function(){console.log(this.page)},searchdata:function(t){var e=this;this.searchloading?this.$message.warning("请勿重复提交表单"):(this.searchloading=!0,this.page.result=[],this.searchFun({nowpage:t,search:this.search}).then(function(t){var l=t.data;console.log(l),e.AfterSearch(l),e.searchloading=!1}))},AfterSearch:function(t){this.page=t.data,this.initresultdata()}},activated:function(){},mounted:function(){this.initsearch(),this.searchdata(1)}}}}]);