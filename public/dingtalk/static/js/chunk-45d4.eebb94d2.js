(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-45d4","chunk-dbc5"],{"/AME":function(e,t,n){"use strict";n.r(t);var c=n("79Hv"),i=n("USVN"),l={name:"CFlowPreviewSubmit",components:{Divider:c.default},props:{flowlevel:{type:Number|String,default:function(){return 0}},previewdata:{type:Object,default:function(){return null}},buttoninfo:{type:Object,default:function(){return null}}},data:function(){return{nextFlowList:[],nextSonFlowList:[],minishownumber:30}},activated:function(){},mounted:function(){this.initdata()},methods:{whenmsgcheckchange:function(e){if(console.log("whenmsgcheckchange"),0==e.msgcheck.length)return e.allmsgcheck=!1,void(e.msgisIndeterminate=!1);e.msgcheck.length==e.msglist.length?(e.allmsgcheck=!0,e.msgisIndeterminate=!1):e.msgisIndeterminate=!0},whencccheckchange:function(e){if(console.log("whencccheckchange"),0==e.cccheck.length)return e.allcccheck=!1,void(e.ccisIndeterminate=!1);e.cccheck.length==e.cclist.length?(e.allcccheck=!0,e.ccisIndeterminate=!1):e.ccisIndeterminate=!0},whenallmsgcheckchange:function(e){if(e.msgisIndeterminate=!1,1==e.allmsgcheck){var t=[];e.msglist.forEach(function(e){t.push(e.to)}),e.msgcheck=t}else e.msgcheck=[]},whenallcccheckchange:function(e){if(e.ccisIndeterminate=!1,1==e.allcccheck){var t=[];e.cclist.forEach(function(e){t.push(e.to)}),e.cccheck=t}else e.cccheck=[]},getdata:function(){var e=this,t=[];this.nextFlowList.forEach(function(e){t.push({funid:e.funid,dealtype:e.dealtype,funname:e.funname,cccheck:e.cccheck,msgcheck:e.msgcheck,flowcheck:e.check,cclevel:e.cclevel,msglevel:e.msglevel})});var n=!1;return t.forEach(function(t){t.flowcheck&&("orsign"==t.dealtype&&0==t.msgcheck.length&&(n=!0,e.$message.error("<"+t.funname+">或签不可为空")),"andsign"==t.dealtype&&0==t.msgcheck.length&&(n=!0,e.$message.error("<"+t.funname+">会签不可为空")))}),n?{}:{funlist:t,sonflows:this.nextSonFlowList}},tran_dealtype:function(e){return Object(i.g)(e)},getcheckboxlist:function(e){var t=[];return e.forEach(function(e){t.push(e.to)}),t},initdata:function(){var e=this;this.nextSonFlowList=[],this.previewdata.data&&this.previewdata.data.nextSonFlows&&this.previewdata.data.nextSonFlows.forEach(function(t){e.nextSonFlowList.push({flowname:t.n,flowid:t.v,check:!0,level:0})}),this.nextFlowList=[],this.previewdata.data&&this.previewdata.data.nextmessage&&this.previewdata.data.nextmessage.forEach(function(t){for(var n=!1,c=0;c<e.nextFlowList.length;c++){if(e.nextFlowList[c].funid==t.funid){n=!0;break}}n?(e.nextFlowList[c].msglist=t.list,e.nextFlowList[c].msgcheck=e.getcheckboxlist(t.list),e.nextFlowList[c].hidemsg=t.list.length>e.minishownumber,e.nextFlowList[c].msglevel=e.flowlevel,e.nextFlowList[c].cclevel=e.flowlevel):e.nextFlowList.push({allmsgcheck:!0,msgisIndeterminate:!1,ccisIndeterminate:!1,msglevel:e.flowlevel,cclevel:e.flowlevel,allcccheck:!0,check:!0,hidemsg:t.list.length>e.minishownumber,hidecc:!1,dealtype:t.dealtype,funname:t.funname,funid:t.funid,msglist:t.list,msgcheck:e.getcheckboxlist(t.list),cclist:[],cccheck:[],waitmergeFunids:t.waitmergeFunids?t.waitmergeFunids:[]})}),this.previewdata.data&&this.previewdata.data.cc&&this.previewdata.data.cc.forEach(function(t){for(var n=!1,c=0;c<e.nextFlowList.length;c++){if(e.nextFlowList[c].funid==t.funid){n=!0;break}}n?(e.nextFlowList[c].cclist=t.list,e.nextFlowList[c].cccheck=e.getcheckboxlist(t.list),e.nextFlowList[c].hidecc=t.list.length>e.minishownumber):e.nextFlowList.push({allmsgcheck:!0,allcccheck:!0,msgisIndeterminate:!1,ccisIndeterminate:!1,check:!0,hidemsg:!1,hidecc:t.list.length>e.minishownumber,dealtype:"",funname:t.funname,funid:t.funid,cclist:t.list,cccheck:e.getcheckboxlist(t.list),msglist:[],msgcheck:[]})})}}},s=(n("Paju"),n("ak9N"),n("KHd+")),a=Object(s.a)(l,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"cflowpreviewsubmit"},[n("el-form",{attrs:{"label-width":e.isPc?"180px":null}},[n("el-form-item",{attrs:{label:"状态:"}},[e._v("\n            "+e._s(e.previewdata.msg)+"\n        ")]),e._v(" "),e.previewdata.data&&e.previewdata.data.flowname?n("el-form-item",{attrs:{label:"流程名称:"}},[e._v("\n            "+e._s(e.previewdata.data.flowname)+"\n        ")]):e._e(),e._v(" "),0==e.nextFlowList.length&&e.nextSonFlowList.length?n("div",[n("Divider",{staticClass:"fz13",attrs:{title:"无下一步环节"}})],1):e._e(),e._v(" "),e.nextSonFlowList.length>0?n("Divider",{staticStyle:{"margin-bottom":"0px"},attrs:{title:"下一步转交其他流程"}}):e._e(),e._v(" "),n("el-form-item",{staticClass:"fz12"},e._l(e.nextSonFlowList,function(t,c){return n("div",{key:c},[n("el-checkbox",{attrs:{disabled:!e.buttoninfo.canchoseflow},model:{value:t.check,callback:function(n){e.$set(t,"check",n)},expression:"flow.check"}},[n("span",{staticClass:"fz13"},[e._v("转发外部流程< "+e._s(t.flowname)+">\n                    \n\n                     "),n("el-dropdown",{staticStyle:{"margin-left":"10px"},attrs:{trigger:"click",placement:"bottom"}},[n("span",{staticClass:"el-dropdown-link"},[n("v-icon",{class:100==t.level?"level_emergency":"level_normal",attrs:{name:"star"}}),e._v(" "),n("i",{staticClass:"el-icon-arrow-down el-icon--right"})],1),e._v(" "),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",{nativeOn:{click:function(e){t.level=0}}},[n("v-icon",{staticClass:"level_normal mg-r5",attrs:{name:"star"}}),e._v("普通")],1),e._v(" "),n("el-dropdown-item",{nativeOn:{click:function(e){t.level=100}}},[n("v-icon",{staticClass:"level_emergency mg-r5",attrs:{name:"star"}}),e._v("紧急")],1)],1)],1)],1)])],1)})),e._v(" "),e.nextFlowList.length>0?n("Divider",{staticStyle:{"margin-bottom":"0px"},attrs:{title:"下一步转交流程"}}):e._e(),e._v(" "),e._l(e.nextFlowList,function(t,c){return n("el-form-item",{key:c,staticClass:"fz12",staticStyle:{"border-bottom":"1px dashed #c1c1c0"}},[n("div",[n("el-checkbox",{attrs:{disabled:!e.buttoninfo.canchoseflow},model:{value:t.check,callback:function(n){e.$set(t,"check",n)},expression:"flow.check"}},[n("span",{staticClass:"fz13"},[e._v("转发流程< "+e._s(t.funname)+">\n                    ")])])],1),e._v(" "),"wait_merge"==t.dealtype&&t.waitmergeFunids.length?n("div",[n("b",{staticClass:"fz12"},[e._v("等待以下流程执行后合并")]),e._v(" "),e._l(t.waitmergeFunids,function(t,c){return n("div",{key:c,staticClass:"fz12"},[e._v("\n                    > "+e._s(t.name)+"\n                ")])})],2):e._e(),e._v(" "),0==t.msglist.length&&0==t.cclist.length&&"wait_merge"!=t.dealtype?n("div",{staticStyle:{"padding-left":"20px"}},[e._v("无")]):e._e(),e._v(" "),t.msglist.length>0?n("div",{staticStyle:{"padding-left":"20px"}},[e._v("\n                转交处理人"),n("span",{staticClass:"label error"},[e._v(e._s(e.tran_dealtype(t.dealtype)))]),e._v(" "),n("el-dropdown",{staticStyle:{"margin-left":"10px"},attrs:{trigger:"click",placement:"bottom"}},[n("span",{staticClass:"el-dropdown-link"},[n("v-icon",{class:100==t.msglevel?"level_emergency":"level_normal",attrs:{name:"star"}}),e._v(" "),n("i",{staticClass:"el-icon-arrow-down el-icon--right"})],1),e._v(" "),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",{nativeOn:{click:function(e){t.msglevel=0}}},[n("v-icon",{staticClass:"level_normal mg-r5",attrs:{name:"star"}}),e._v("\n\n                          \n                            普通")],1),e._v(" "),n("el-dropdown-item",{nativeOn:{click:function(e){t.msglevel=100}}},[n("v-icon",{staticClass:"level_emergency mg-r5",attrs:{name:"star"}}),e._v("\n\n                            紧急")],1)],1)],1),e._v(" "),n("br"),e._v(" "),n("el-checkbox",{attrs:{disabled:"andsign"==t.dealtype&&!e.buttoninfo.canchoseander||!t.check||"orsign"==t.dealtype&&!e.buttoninfo.canchoseorer||"message"==t.dealtype&&!e.buttoninfo.canchosecc,indeterminate:t.msgisIndeterminate},on:{change:function(n){e.whenallmsgcheckchange(t)}},model:{value:t.allmsgcheck,callback:function(n){e.$set(t,"allmsgcheck",n)},expression:"flow.allmsgcheck"}},[e._v("全/反选")]),e._v(" "),n("div",{staticClass:"accordionBox",class:{mustshow:t.msglist.length<e.minishownumber,hide:t.hidemsg,show:!t.hidemsg}},[n("el-checkbox-group",{attrs:{disabled:"andsign"==t.dealtype&&!e.buttoninfo.canchoseander||!t.check||"orsign"==t.dealtype&&!e.buttoninfo.canchoseorer||"message"==t.dealtype&&!e.buttoninfo.canchosecc},on:{change:function(n){e.whenmsgcheckchange(t)}},model:{value:t.msgcheck,callback:function(n){e.$set(t,"msgcheck",n)},expression:"flow.msgcheck"}},e._l(t.msglist,function(t,c){return n("span",{key:c,staticClass:"namelist fz12"},[n("el-checkbox",{attrs:{label:t.to}},[e._v(e._s(t.name))])],1)})),e._v(" "),n("div",{staticClass:"accordionHandler",on:{click:function(e){t.hidemsg=!t.hidemsg}}},[t.hidemsg?n("i",{staticClass:"el-icon-arrow-down"}):n("i",{staticClass:"el-icon-arrow-up"})])],1)],1):e._e(),e._v(" "),t.cclist.length>0?n("div",{staticStyle:{"padding-left":"20px"}},[e._v("\n                抄送人：\n                "),e._v(" "),n("el-dropdown",{staticStyle:{"margin-left":"10px"},attrs:{trigger:"click",placement:"bottom"}},[n("span",{staticClass:"el-dropdown-link"},[n("v-icon",{staticClass:"mg-r5",class:100==t.cclevel?"level_emergency":"level_normal",attrs:{name:"star"}}),e._v(" "),n("i",{staticClass:"el-icon-arrow-down el-icon--right"})],1),e._v(" "),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",{nativeOn:{click:function(e){t.cclevel=0}}},[n("v-icon",{staticClass:"level_normal mg-r5",attrs:{name:"star"}}),e._v("\n                           普通")],1),e._v(" "),n("el-dropdown-item",{nativeOn:{click:function(e){t.cclevel=100}}},[n("v-icon",{staticClass:"level_emergency mg-r5",attrs:{name:"star"}}),e._v("\n                            紧急")],1)],1)],1),e._v(" "),n("br"),e._v(" "),n("el-checkbox",{attrs:{disabled:!t.check||!e.buttoninfo.canchosecc,indeterminate:t.ccisIndeterminate},on:{change:function(n){e.whenallcccheckchange(t)}},model:{value:t.allcccheck,callback:function(n){e.$set(t,"allcccheck",n)},expression:"flow.allcccheck"}},[e._v("全/反选")]),e._v(" "),n("div",{staticClass:"accordionBox",class:{mustshow:t.cclist.length<e.minishownumber,hide:t.hidecc,show:!t.hidecc}},[n("el-checkbox-group",{attrs:{disabled:!t.check||!e.buttoninfo.canchosecc},on:{change:function(n){e.whencccheckchange(t)}},model:{value:t.cccheck,callback:function(n){e.$set(t,"cccheck",n)},expression:"flow.cccheck"}},e._l(t.cclist,function(t,c){return n("span",{key:c,staticClass:"namelist fz12"},[n("el-checkbox",{attrs:{label:t.to}},[e._v("\n                                "+e._s(t.name)+"\n                            ")])],1)})),e._v(" "),n("div",{staticClass:"accordionHandler",on:{click:function(e){t.hidecc=!t.hidecc}}},[t.hidecc?n("i",{staticClass:"el-icon-arrow-down"}):n("i",{staticClass:"el-icon-arrow-up"})])],1)],1):e._e()])})],2)],1)},[],!1,null,"1f7d162f",null);a.options.__file="CFlowPreviewSubmit.vue";t.default=a.exports},"79Hv":function(e,t,n){"use strict";n.r(t);var c={name:"Divider",props:{title:{type:String,default:function(){return""}}}},i=(n("YnOI"),n("KHd+")),l=Object(i.a)(c,function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"ivu-divider ivu-divider-horizontal ivu-divider-with-text-center"},[t("span",{staticClass:"ivu-divider-inner-text"},[this._v("\n    "+this._s(this.title)+"\n  ")])])},[],!1,null,null,null);l.options.__file="CDivider.vue";t.default=l.exports},"8V57":function(e,t,n){},H9at:function(e,t,n){},Paju:function(e,t,n){"use strict";var c=n("e+0Z");n.n(c).a},YnOI:function(e,t,n){"use strict";var c=n("H9at");n.n(c).a},ak9N:function(e,t,n){"use strict";var c=n("8V57");n.n(c).a},"e+0Z":function(e,t,n){}}]);