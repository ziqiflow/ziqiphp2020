(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-6c2c","chunk-cba6","chunk-2ff1"],{"Ts+a":function(e,t,i){"use strict";i.r(t);var n=i("P2sY"),l=i.n(n),o=i("QbLZ"),s=i.n(o),r=i("L2JU"),a=i("X4fA"),c={name:"CModelShowImages",props:{type:{type:String,default:function(){return"flowlog"}},filelistlog:{type:Array,default:function(){return[]}},files:{type:Array,default:function(){return[]}}},data:function(){return{image_preview_model:!1,preview_file:null,preview_rotate:0}},computed:s()({},Object(r.e)({userid:function(e){return e.user.id}}),{preview_style:function(){return{transform:"rotate("+this.preview_rotate+"deg)"}}}),mounted:function(){},methods:{rotateImage:function(){this.preview_rotate=(this.preview_rotate+90)%360},showimage:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=null;this.preview_file=null;var o=[];"flowlog"==this.type?(i&&(this.filelistlog=i),o=this.filelistlog):(i&&(this.files=i),o=[{files:this.files}]);var s=Object(a.b)(this.userid);o.forEach(function(i){i.files.forEach(function(o){o.fileid==e?(t.preview_file=l()({},o),t.preview_file.funname=i.funname?i.funname:null,t.preview_file.url=window.baseURL+"/file/oa/"+o.fileid+"/"+o.name+"?"+s,t.preview_file.previous_fileid=n,t.preview_rotate=0):"jpeg"!=o.formats&&"jpg"!=o.formats&&"png"!=o.formats||(t.preview_file?t.preview_file.next_fileid||(t.preview_file.next_fileid=o.fileid):n=o.fileid)})}),this.image_preview_model=!0}}},f=(i("Wrx9"),i("KHd+")),d=Object(f.a)(c,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-dialog",{attrs:{fullscreen:!0,title:e.preview_file?e.preview_file.name:"",visible:e.image_preview_model,"append-to-body":""},on:{"update:visible":function(t){e.image_preview_model=t}}},[e.preview_file?i("div",[i("div",[i("div",{staticStyle:{float:"left"}},[e.preview_file.funname?i("div",[e._v("来自流程："+e._s(e.preview_file.funname))]):e._e(),e._v("\n          文件信息："+e._s(e.preview_file.name)),i("br"),e._v("\n          上传时间："+e._s(e.preview_file.created_at)),i("br"),e._v("\n          文件大小："+e._s(e.preview_file.size)),i("br")]),e._v(" "),i("div",{staticStyle:{float:"left",padding:"10px"}},[i("div",[i("el-button",{attrs:{disabled:!e.preview_file.previous_fileid,size:"mini",icon:"el-icon-arrow-left"},on:{click:function(t){e.showimage(e.preview_file.previous_fileid)}}}),e._v(" "),i("el-button",{attrs:{disabled:!e.preview_file.next_fileid,size:"mini"},on:{click:function(t){e.showimage(e.preview_file.next_fileid)}}},[i("i",{staticClass:"el-icon-arrow-right el-icon--right"})]),e._v(" "),i("el-button",{attrs:{size:"mini"},on:{click:e.rotateImage}},[i("i",{staticClass:"el-icon-refresh-right"})])],1)]),e._v(" "),i("div",{staticClass:"clear"})]),e._v(" "),i("div",{staticStyle:{"text-align":"center"}},[i("div",{staticStyle:{"min-height":"150px"}},[i("el-image",{staticStyle:{padding:"10px"},style:e.preview_style,attrs:{src:e.preview_file.url}},[i("div",{staticClass:"image-slot",attrs:{slot:"placeholder"},slot:"placeholder"},[e._v("\n              加载中"),i("span",{staticClass:"dot"},[e._v("...")])]),e._v(" "),i("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"},[i("i",{staticClass:"el-icon-picture-outline"}),e._v("图片加载失败\n          ")])])],1),e._v(" "),i("div",{staticStyle:{position:"fixed",bottom:"10px",width:"100%"}},[i("el-button",{attrs:{disabled:!e.preview_file.previous_fileid,size:"small",type:"primary",icon:"el-icon-arrow-left"},on:{click:function(t){e.showimage(e.preview_file.previous_fileid)}}},[e._v("上一张图片")]),e._v(" "),i("el-button",{attrs:{disabled:!e.preview_file.next_fileid,size:"small",type:"primary"},on:{click:function(t){e.showimage(e.preview_file.next_fileid)}}},[e._v("下一张图片"),i("i",{staticClass:"el-icon-arrow-right el-icon--right"})]),e._v(" "),i("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.rotateImage}},[e._v("旋转"),i("i",{staticClass:"el-icon-refresh-right el-icon--left"})])],1)])]):e._e()])],1)},[],!1,null,"5adf9084",null);d.options.__file="CModalShowImages.vue";t.default=d.exports},W2Fo:function(e,t,i){!function(e){"use strict";!function(){if("undefined"!=typeof document){var e=document.head||document.getElementsByTagName("head")[0],t=document.createElement("style"),i=" .timeline { padding: 0; position: relative; list-style: none; font-family: PingFangSC-light, Avenir, Helvetica, Arial, Hiragino Sans GB, Microsoft YaHei, sans-serif; -webkit-font-smoothing: antialiased; margin: 10px 20px; } .timeline:after { position: absolute; content: ''; left: 0; top: 0; width: 1px; height: 100%; background-color: var(--timelineTheme); } .timeline-item { position: relative; margin: 1.5em 0 0 28px; padding-bottom: 1.5em; border-bottom: 1px dotted var(--timelineTheme); } .timeline-item:last-child { border-bottom: none; } .timeline-circle { position: absolute; top: .28em; left: -34px; width: 10px; height: 10px; border-radius: 50%; border: 1px solid var(--timelineTheme); background-color: var(--timelineTheme); z-index: 1; box-sizing: content-box; } .timeline-circle.hollow { background-color: var(--timelineBg); } .timeline-title { position: relative; display: inline-block; /** * BFC inline-block 元素与其兄弟元素、子元素和父元素的外边距都不会折叠（包括其父元素和子元素） */ cursor: crosshair; margin: -.15em 0 15px 28px } .timeline-title:not(:first-child) { margin-top: 28px; } .timeline-title-circle { left: -36px; top: .15em; width: 16px; height: 16px; } .timeline-others { width: 40px; height: auto; top: .2em; left: -48px; line-height: 1; padding: 2px 0; text-align: center; border: none; background-color: var(--timelineBg); } ";t.type="text/css",t.styleSheet?t.styleSheet.cssText=i:t.appendChild(document.createTextNode(i)),e.appendChild(t)}}();var t={render:function(){var e=this.$createElement,t=this._self._c||e;return t("ul",{ref:"timeline",staticClass:"timeline"},[this._t("default")],2)},staticRenderFns:[],name:"Timeline",props:{timelineTheme:{type:String,default:"#dbdde0"},timelineBg:{type:String,default:"#fff"}},mounted:function(){var e=this.$refs.timeline;e.style.setProperty("--timelineTheme",this.timelineTheme),e.style.setProperty("--timelineBg",this.timelineBg)}};!function(){if("undefined"!=typeof document){var e=document.head||document.getElementsByTagName("head")[0],t=document.createElement("style");t.type="text/css",t.styleSheet?t.styleSheet.cssText="":t.appendChild(document.createTextNode("")),e.appendChild(t)}}();var i={name:"TimelineItemBase",props:{bgColor:{type:String,default:""},lineColor:{type:String,default:""},hollow:{type:Boolean,default:!1},fontColor:{type:String,default:"#37414a"}},data:function(){return{slotOthers:!1}},computed:{circleStyle:function(){if(this.bgColor||this.lineColor||this.hollow){var e={};return this.bgColor&&(e={"border-color":this.bgColor,"background-color":this.bgColor}),this.lineColor&&(e=Object.assign({},e,{"border-color":this.lineColor})),e}},itemStyle:function(){return{color:this.fontColor}},slotClass:function(){var e="";return this.slotOthers?e="timeline-others":this.hollow&&(e="hollow"),e}},mounted:function(){this.slotOthers=!!this.$refs.others.innerHTML}};!function(){if("undefined"!=typeof document){var e=document.head||document.getElementsByTagName("head")[0],t=document.createElement("style");t.type="text/css",t.styleSheet?t.styleSheet.cssText="":t.appendChild(document.createTextNode("")),e.appendChild(t)}}();var n={render:function(){var e=this.$createElement,t=this._self._c||e;return t("li",{staticClass:"timeline-item",style:this.itemStyle},[t("div",{ref:"others",staticClass:"timeline-circle",class:this.slotClass,style:this.circleStyle},[this._t("others")],2),this._v(" "),this._t("default")],2)},staticRenderFns:[],extends:i};!function(){if("undefined"!=typeof document){var e=document.head||document.getElementsByTagName("head")[0],t=document.createElement("style");t.type="text/css",t.styleSheet?t.styleSheet.cssText="":t.appendChild(document.createTextNode("")),e.appendChild(t)}}();var l={render:function(){var e=this.$createElement,t=this._self._c||e;return t("li",{staticClass:"timeline-title",style:this.itemStyle},[t("div",{ref:"others",staticClass:"timeline-circle timeline-title-circle",class:this.slotClass,style:this.circleStyle},[this._t("others")],2),this._v(" "),this._t("default")],2)},staticRenderFns:[],extends:i};"undefined"!=typeof window&&window.Vue&&(window.Vue.component(t.name,t),window.Vue.component(n.name,n),window.Vue.component(l.name,l)),e.Timeline=t,e.TimelineItem=n,e.TimelineTitle=l,Object.defineProperty(e,"__esModule",{value:!0})}(t)},WRrL:function(e,t,i){"use strict";i.r(t);var n=i("QbLZ"),l=i.n(n),o=i("L2JU"),s=i("X4fA"),r=i("W2Fo"),a=i("Ts+a"),c=i("k48p"),f={name:"Cflowlog",components:{Timeline:r.Timeline,TimelineItem:r.TimelineItem,TimelineTitle:r.TimelineTitle,ModelShowImages:a.default},props:{filelistlog:{type:Array,default:function(){return[]}}},computed:l()({},Object(o.e)({userid:function(e){return e.user.id}})),data:function(){return{}},activated:function(){},mounted:function(){},methods:{filedown:function(e){window.open(window.baseURL+"/file/oa/"+e.fileid+"/"+e.name+"?"+Object(s.b)(this.userid),this.isPc?"_blank":"_self")},showimage:function(e){this.$refs.showimages.showimage(e)},friendlytimejs:function(e){return Object(c.a)(e,new Date)}}},d=(i("f2f8"),i("KHd+")),u=Object(d.a)(f,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[e.filelistlog?i("div",{staticClass:"log"},[i("model-show-images",{ref:"showimages",attrs:{filelistlog:e.filelistlog,type:"flowlog"}}),e._v(" "),i("timeline",e._l(e.filelistlog,function(t){return i("timeline-item",{key:t._id,attrs:{color:"green"}},[i("div",{staticClass:"fz13"},[i("v-icon",{attrs:{name:"person"}}),e._v(" "),i("span",[e._v(e._s(t.creater))]),e._v(" "),i("span",{staticClass:"funname"},[e._v(e._s(t.funname))]),e._v(" "),i("span",{staticClass:"fz12",staticStyle:{"margin-right":"5px"}},[e._v(e._s(e.friendlytimejs(t.created_at)))])],1),e._v(" "),i("div",e._l(t.files,function(t,n){return i("div",{key:n,staticClass:"fz12"},[i("span",[e._v(e._s(t.name)+" ")]),e._v(" "),"jpeg"==t.formats||"jpg"==t.formats||"png"==t.formats?i("i",{staticClass:"el-icon-picture-outline mg-r5 image_file_preview",staticStyle:{cursor:"pointer"},on:{click:function(i){e.showimage(t.fileid,e.filelistlog)}}}):e._e(),e._v(" "),i("i",{staticClass:"el-icon-download filedown mg-r5",on:{click:function(i){e.filedown(t)}}})])}))])}))],1):e._e()])},[],!1,null,"c022809c",null);u.options.__file="CFlowFileLog.vue";t.default=u.exports},Wrx9:function(e,t,i){"use strict";var n=i("w3TN");i.n(n).a},f2f8:function(e,t,i){"use strict";var n=i("wfC3");i.n(n).a},k48p:function(e,t,i){"use strict";i.d(t,"a",function(){return n});var n=function(e,t){if(!e)return"";var i,n,l,o,s=new Date(t),r=e.split(/\s+/gi),a=function(e,t){try{return parseInt(e,10)}catch(e){return t}},c=function(e){return e<10?"0"+e:e};return r.length>=2?(i=r[0].split(/[\/\-]/gi),n=r[1].split(":"),(l=new Date).setYear(a(i[0],s.getFullYear())),l.setMonth(a(i[1],s.getMonth()+1)-1),l.setDate(a(i[2],s.getDate())),l.setHours(a(n[0],s.getHours())),l.setMinutes(a(n[1],s.getMinutes())),l.setSeconds(a(n[2],s.getSeconds())),(o=s.getTime()-l.getTime())<=6e3?"1分钟内":o<36e5?Math.floor(o/6e4)+"分钟前":o<864e5?Math.floor(o/36e5)+"小时前":o<2592e5?Math.floor(o/864e5)+"天前":s.getFullYear()!=l.getFullYear()?[c(l.getFullYear()),c(l.getMonth()+1),c(l.getDate())].join("-"):[c(l.getMonth()+1),c(l.getDate())].join("-")):""}},w3TN:function(e,t,i){},wfC3:function(e,t,i){}}]);